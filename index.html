<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Digital attraction passes for Palm Beach County - save up to 50% on 156+ attractions">
    <meta name="theme-color" content="#10B981">
    <title>Palm Beach Pass - Demo</title>
    
    <!-- PWA Manifest -->
    <link rel="manifest" href="manifest.json">
    
    <!-- Apple PWA Meta Tags -->
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <meta name="apple-mobile-web-app-title" content="Palm Beach Pass">
    
    <!-- Favicon -->
    <link rel="icon" type="image/svg+xml" href="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDgiIGhlaWdodD0iNDgiIHZpZXdCb3g9IjAgMCA0OCA0OCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHJlY3Qgd2lkdGg9IjQ4IiBoZWlnaHQ9IjQ4IiByeD0iMTIiIGZpbGw9IiMxMEI5ODEiLz4KPHN2ZyB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4PSIxMiIgeT0iMTIiPgo8cGF0aCBkPSJNMjEgMTBjMCAyLTEgNC0zIDUtMiAxLTMgMi0zIDMgMCAyIDEgMyAzIDNoN3YtMmMwLTEtMS0yLTItMnMtMi0xLTItMmMwLTEgMS0yIDItMnMxLTIgMS0yeiIgZmlsbD0id2hpdGUiLz4KPHN0cm9rZSBkPSJNOSAxMWEzIDMgMCAxIDAgNi0zIDMgMyAwIDAgMC02IDN6IiBzdHJva2U9IndoaXRlIiBzdHJva2Utd2lkdGg9IjIiIGZpbGw9Im5vbmUiLz4KPHN0cm9rZSBkPSJtOSAxMi00IDEzaDZsMS0zaDRsMS0zaC00eiIgc3Ryb2tlPSJ3aGl0ZSIgc3Ryb2tlLXdpZHRoPSIyIiBmaWxsPSJub25lIi8+Cjwvc3ZnPgo8L3N2Zz4K">
    
    <!-- CSS Libraries - Load First -->
    <link href="https://cdn.tailwindcss.com" rel="stylesheet">
    
    <!-- Fallback CSS -->
    <style>
        /* Fallback styles in case Tailwind doesn't load */
        * { box-sizing: border-box; }
        body { margin: 0; font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif; }
        .min-h-screen { min-height: 100vh; }
        .flex { display: flex; }
        .items-center { align-items: center; }
        .justify-center { justify-content: center; }
        .p-4 { padding: 1rem; }
        .bg-white { background-color: white; }
        .rounded-lg { border-radius: 0.5rem; }
        .shadow-2xl { box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.25); }
        .text-center { text-align: center; }
        .mb-8 { margin-bottom: 2rem; }
        .text-2xl { font-size: 1.5rem; }
        .font-bold { font-weight: 700; }
        .text-gray-800 { color: #1f2937; }
        .text-gray-600 { color: #4b5563; }
        .space-y-4 > * + * { margin-top: 1rem; }
        .w-full { width: 100%; }
        .px-3 { padding-left: 0.75rem; padding-right: 0.75rem; }
        .py-2 { padding-top: 0.5rem; padding-bottom: 0.5rem; }
        .border { border: 1px solid #d1d5db; }
        .rounded-md { border-radius: 0.375rem; }
        .bg-green-500 { background-color: #10b981; }
        .text-white { color: white; }
        .w-16 { width: 4rem; }
        .h-16 { height: 4rem; }
        .mx-auto { margin-left: auto; margin-right: auto; }
        .mb-4 { margin-bottom: 1rem; }
        .w-8 { width: 2rem; }
        .h-8 { height: 2rem; }
        
        .line-clamp-2 {
            overflow: hidden;
            display: -webkit-box;
            -webkit-box-orient: vertical;
            -webkit-line-clamp: 2;
        }
        
        /* Loading animation */
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        .loading-screen {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            z-index: 9999;
            font-family: Arial, sans-serif;
        }
        
        .error-screen {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: #ef4444;
            color: white;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            z-index: 9998;
            font-family: Arial, sans-serif;
            text-align: center;
            padding: 20px;
        }
    </style>
</head>
<body>
    <!-- Loading Screen -->
    <div id="loading" class="loading-screen">
        <div style="width: 64px; height: 64px; background: rgba(255,255,255,0.2); border-radius: 16px; display: flex; align-items: center; justify-content: center; margin-bottom: 20px;">
            <div style="width: 32px; height: 32px; border: 3px solid rgba(255,255,255,0.3); border-top: 3px solid white; border-radius: 50%; animation: spin 1s linear infinite;"></div>
        </div>
        <h1 style="font-size: 24px; font-weight: bold; margin-bottom: 8px;">Palm Beach Pass</h1>
        <p style="opacity: 0.8;">Loading your digital attraction pass...</p>
        <p style="font-size: 12px; margin-top: 20px; opacity: 0.6;">If this takes too long, try refreshing the page</p>
    </div>

    <!-- Error Screen (hidden by default) -->
    <div id="error" class="error-screen" style="display: none;">
        <h1 style="font-size: 24px; font-weight: bold; margin-bottom: 16px;">Loading Error</h1>
        <p style="margin-bottom: 20px;">There was a problem loading the app. This could be due to:</p>
        <ul style="text-align: left; margin-bottom: 20px;">
            <li>• Slow internet connection</li>
            <li>• Browser compatibility issues</li>
            <li>• Script loading problems</li>
        </ul>
        <button onclick="window.location.reload()" style="background: white; color: #ef4444; border: none; padding: 12px 24px; border-radius: 8px; font-size: 16px; cursor: pointer; font-weight: bold;">
            Refresh Page
        </button>
    </div>

    <!-- Main App Container -->
    <div id="root"></div>

    <!-- JavaScript Libraries -->
    <script>
        // Global error handler
        window.addEventListener('error', function(e) {
            console.error('Global error:', e.error);
            setTimeout(() => {
                document.getElementById('loading').style.display = 'none';
                document.getElementById('error').style.display = 'flex';
            }, 1000);
        });

        // Timeout fallback
        setTimeout(() => {
            if (document.getElementById('loading').style.display !== 'none') {
                console.warn('Loading timeout reached');
                document.getElementById('loading').style.display = 'none';
                document.getElementById('error').style.display = 'flex';
            }
        }, 15000); // 15 second timeout
    </script>

    <!-- React -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>

    <!-- Fallback for React -->
    <script>
        if (!window.React) {
            console.log('Loading React fallback...');
            document.write('<script src="https://cdnjs.cloudflare.com/ajax/libs/react/18.2.0/umd/react.production.min.js"><\/script>');
            document.write('<script src="https://cdnjs.cloudflare.com/ajax/libs/react-dom/18.2.0/umd/react-dom.production.min.js"><\/script>');
        }
    </script>

    <!-- Babel -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script>
        if (!window.Babel) {
            console.log('Loading Babel fallback...');
            document.write('<script src="https://cdnjs.cloudflare.com/ajax/libs/babel-standalone/7.23.5/babel.min.js"><\/script>');
        }
    </script>

    <!-- Icons -->
    <script src="https://unpkg.com/lucide@latest/dist/umd/lucide.js"></script>

    <!-- Main Application -->
    <script type="text/babel">
        console.log('Starting Palm Beach Pass app...');

        // Wait for all dependencies to load
        function waitForDependencies() {
            return new Promise((resolve) => {
                const checkDeps = () => {
                    if (window.React && window.ReactDOM && window.Babel) {
                        console.log('All dependencies loaded');
                        resolve();
                    } else {
                        console.log('Waiting for dependencies...', {
                            React: !!window.React,
                            ReactDOM: !!window.ReactDOM,
                            Babel: !!window.Babel
                        });
                        setTimeout(checkDeps, 100);
                    }
                };
                checkDeps();
            });
        }

        // Initialize app
        waitForDependencies().then(() => {
            console.log('Initializing React app...');

            const { useState } = React;
            
            // Icon fallbacks
            const Icons = {
                MapPin: () => React.createElement('span', { style: { fontSize: '16px' } }, '📍'),
                Phone: () => React.createElement('span', { style: { fontSize: '16px' } }, '📞'),
                Star: () => React.createElement('span', { style: { fontSize: '16px' } }, '⭐'),
                Filter: () => React.createElement('span', { style: { fontSize: '16px' } }, '🔽'),
                Grid: () => React.createElement('span', { style: { fontSize: '16px' } }, '⊞'),
                List: () => React.createElement('span', { style: { fontSize: '16px' } }, '☰'),
                Heart: () => React.createElement('span', { style: { fontSize: '16px' } }, '❤️'),
                ShoppingCart: () => React.createElement('span', { style: { fontSize: '16px' } }, '🛒'),
                User: () => React.createElement('span', { style: { fontSize: '16px' } }, '👤'),
                Menu: () => React.createElement('span', { style: { fontSize: '16px' } }, '☰'),
                X: () => React.createElement('span', { style: { fontSize: '16px' } }, '✕'),
                DollarSign: () => React.createElement('span', { style: { fontSize: '16px' } }, '$')
            };

            // Check if Lucide loaded
            if (window.lucide) {
                console.log('Lucide icons loaded');
                Object.assign(Icons, window.lucide);
            } else {
                console.log('Using fallback icons');
            }

            const { MapPin, Phone, Star, Filter, Grid, List, Heart, ShoppingCart, User, Menu, X, DollarSign } = Icons;

            // Attractions data
            const attractions = [
                {
                    id: 1,
                    name: "Palm Beach Seaquarium",
                    category: "family",
                    image: "https://images.unsplash.com/photo-1544551763-46a013bb70d5?w=300&h=200&fit=crop",
                    price: 120,
                    rating: 4.8,
                    description: "Both entertaining and educational, this underwater wonderland has it all to dive in and explore the ocean's most amazing creatures.",
                    location: "Boynton Beach, FL"
                },
                {
                    id: 2,
                    name: "Norton Museum of Art",
                    category: "culture",
                    image: "https://images.unsplash.com/photo-1578321272176-b7bbc0679853?w=300&h=200&fit=crop",
                    price: 120,
                    rating: 4.7,
                    description: "World-class art collection and exhibitions in a beautiful setting.",
                    location: "West Palm Beach, FL"
                },
                {
                    id: 3,
                    name: "Worth Avenue",
                    category: "shopping",
                    image: "https://images.unsplash.com/photo-1441986300917-64674bd600d8?w=300&h=200&fit=crop",
                    price: 120,
                    rating: 4.6,
                    description: "Luxury shopping and dining destination in Palm Beach.",
                    location: "Palm Beach, FL"
                }
            ];

            // Main App Component
            const App = () => {
                const [currentScreen, setCurrentScreen] = useState('login');
                const [user, setUser] = useState(null);
                const [verificationCode, setVerificationCode] = useState('');

                // Login Screen
                const LoginScreen = () => {
                    const [email, setEmail] = useState('demo@demo.com');
                    const [password, setPassword] = useState('demo');

                    const handleLogin = () => {
                        if (email === 'demo@demo.com' && password === 'demo') {
                            setCurrentScreen('2fa');
                        } else {
                            alert('Please use demo@demo.com / demo');
                        }
                    };

                    return React.createElement('div', {
                        className: "min-h-screen flex items-center justify-center p-4",
                        style: { background: 'linear-gradient(135deg, #60a5fa 0%, #4ade80 100%)' }
                    },
                        React.createElement('div', {
                            className: "bg-white rounded-lg shadow-2xl p-8 w-full max-w-md"
                        },
                            React.createElement('div', {
                                className: "text-center mb-8"
                            },
                                React.createElement('div', {
                                    className: "w-16 h-16 bg-green-500 rounded-lg mx-auto mb-4 flex items-center justify-center"
                                }, React.createElement(MapPin, { className: "w-8 h-8 text-white" })),
                                React.createElement('h1', {
                                    className: "text-2xl font-bold text-gray-800"
                                }, "Palm Beach Pass"),
                                React.createElement('p', {
                                    className: "text-gray-600"
                                }, "Saving on attractions, made simple")
                            ),
                            React.createElement('div', {
                                className: "space-y-4"
                            },
                                React.createElement('div', null,
                                    React.createElement('label', {
                                        className: "block text-sm font-medium text-gray-700 mb-2"
                                    }, "Email"),
                                    React.createElement('input', {
                                        type: "email",
                                        value: email,
                                        onChange: (e) => setEmail(e.target.value),
                                        className: "w-full px-3 py-2 border rounded-md",
                                        placeholder: "Enter your email"
                                    })
                                ),
                                React.createElement('div', null,
                                    React.createElement('label', {
                                        className: "block text-sm font-medium text-gray-700 mb-2"
                                    }, "Password"),
                                    React.createElement('input', {
                                        type: "password",
                                        value: password,
                                        onChange: (e) => setPassword(e.target.value),
                                        className: "w-full px-3 py-2 border rounded-md",
                                        placeholder: "Enter your password"
                                    })
                                ),
                                React.createElement('button', {
                                    onClick: handleLogin,
                                    className: "w-full bg-green-500 text-white py-2 px-4 rounded-md font-semibold",
                                    style: { transition: 'background-color 0.2s' }
                                }, "Sign In"),
                                React.createElement('p', {
                                    className: "text-xs text-gray-500 text-center mt-4"
                                }, "Demo: Use demo@demo.com / demo")
                            )
                        )
                    );
                };

                // 2FA Screen
                const TwoFactorScreen = () => {
                    const handleVerification = () => {
                        if (verificationCode === '123456') {
                            setUser({ email: 'demo@demo.com' });
                            setCurrentScreen('home');
                        } else {
                            alert('Please enter 123456');
                        }
                    };

                    return React.createElement('div', {
                        className: "min-h-screen flex items-center justify-center p-4",
                        style: { background: 'linear-gradient(135deg, #60a5fa 0%, #4ade80 100%)' }
                    },
                        React.createElement('div', {
                            className: "bg-white rounded-lg shadow-2xl p-8 w-full max-w-md"
                        },
                            React.createElement('div', {
                                className: "text-center mb-8"
                            },
                                React.createElement(Phone, { 
                                    className: "w-16 h-16 text-green-500 mx-auto mb-4",
                                    style: { width: '4rem', height: '4rem' }
                                }),
                                React.createElement('h1', {
                                    className: "text-2xl font-bold text-gray-800"
                                }, "Verify Your Phone"),
                                React.createElement('p', {
                                    className: "text-gray-600"
                                }, "Enter the verification code: 123456")
                            ),
                            React.createElement('div', {
                                className: "space-y-4"
                            },
                                React.createElement('input', {
                                    type: "text",
                                    value: verificationCode,
                                    onChange: (e) => setVerificationCode(e.target.value),
                                    className: "w-full px-3 py-2 border rounded-md text-center text-2xl",
                                    placeholder: "000000",
                                    maxLength: "6"
                                }),
                                React.createElement('button', {
                                    onClick: handleVerification,
                                    className: "w-full bg-green-500 text-white py-2 px-4 rounded-md font-semibold"
                                }, "Verify"),
                                React.createElement('p', {
                                    className: "text-xs text-gray-500 text-center"
                                }, "Demo code: 123456")
                            )
                        )
                    );
                };

                // Home Screen
                const HomeScreen = () => React.createElement('div', {
                    className: "min-h-screen",
                    style: { backgroundColor: '#f9fafb' }
                },
                    // Header
                    React.createElement('header', {
                        className: "bg-white shadow-sm",
                        style: { borderBottom: '1px solid #e5e7eb' }
                    },
                        React.createElement('div', {
                            style: { maxWidth: '1200px', margin: '0 auto', padding: '0 1rem' }
                        },
                            React.createElement('div', {
                                style: { display: 'flex', justifyContent: 'space-between', alignItems: 'center', height: '4rem' }
                            },
                                React.createElement('div', {
                                    style: { display: 'flex', alignItems: 'center' }
                                },
                                    React.createElement('div', {
                                        className: "w-8 h-8 bg-green-500 rounded-lg flex items-center justify-center",
                                        style: { marginRight: '0.5rem' }
                                    }, React.createElement(MapPin, { className: "w-5 h-5 text-white" })),
                                    React.createElement('span', {
                                        style: { fontSize: '1.25rem', fontWeight: 'bold', color: '#1f2937' }
                                    }, "Palm Beach Pass")
                                ),
                                React.createElement('div', {
                                    style: { display: 'flex', gap: '1rem', alignItems: 'center' }
                                },
                                    React.createElement('span', {
                                        style: { fontSize: '0.875rem', color: '#6b7280', cursor: 'pointer' },
                                        onClick: () => window.open('customer-account.html', '_blank')
                                    }, "Account"),
                                    React.createElement(ShoppingCart, { 
                                        style: { width: '1.25rem', height: '1.25rem', color: '#6b7280', cursor: 'pointer' },
                                        onClick: () => window.open('checkout.html', '_blank')
                                    })
                                )
                            )
                        )
                    ),

                    // Hero Section
                    React.createElement('div', {
                        style: { 
                            height: '16rem', 
                            background: 'linear-gradient(135deg, #3b82f6 0%, #1d4ed8 100%)',
                            display: 'flex',
                            alignItems: 'center',
                            justifyContent: 'center',
                            color: 'white',
                            textAlign: 'center'
                        }
                    },
                        React.createElement('div', null,
                            React.createElement('h1', {
                                style: { fontSize: '2.5rem', fontWeight: 'bold', marginBottom: '1rem' }
                            }, "156 ATTRACTIONS"),
                            React.createElement('h2', {
                                style: { fontSize: '1.5rem', marginBottom: '0.5rem' }
                            }, React.createElement('span', { style: { color: '#4ade80' } }, "FREE"), " WITH PALM BEACH PASS"),
                            React.createElement('p', {
                                style: { fontSize: '1.125rem' }
                            }, "Access outdoor adventures, museums and more experiences")
                        )
                    ),

                    // Quick Links
                    React.createElement('div', {
                        style: { maxWidth: '1200px', margin: '0 auto', padding: '2rem 1rem' }
                    },
                        React.createElement('div', {
                            style: { display: 'grid', gridTemplateColumns: 'repeat(auto-fit, minmax(250px, 1fr))', gap: '1.5rem', marginBottom: '2rem' }
                        },
                            React.createElement('button', {
                                onClick: () => window.open('customer-passes.html', '_blank'),
                                style: { 
                                    background: '#3b82f6', 
                                    color: 'white', 
                                    padding: '1.5rem', 
                                    borderRadius: '0.5rem', 
                                    border: 'none', 
                                    cursor: 'pointer',
                                    fontSize: '1rem',
                                    fontWeight: 'bold'
                                }
                            }, "📱 View My Passes"),
                            React.createElement('button', {
                                onClick: () => window.open('checkout.html', '_blank'),
                                style: { 
                                    background: '#10b981', 
                                    color: 'white', 
                                    padding: '1.5rem', 
                                    borderRadius: '0.5rem', 
                                    border: 'none', 
                                    cursor: 'pointer',
                                    fontSize: '1rem',
                                    fontWeight: 'bold'
                                }
                            }, "🛒 Buy New Pass"),
                            React.createElement('button', {
                                onClick: () => window.open('vendor-portal.html', '_blank'),
                                style: { 
                                    background: '#ef4444', 
                                    color: 'white', 
                                    padding: '1.5rem', 
                                    borderRadius: '0.5rem', 
                                    border: 'none', 
                                    cursor: 'pointer',
                                    fontSize: '1rem',
                                    fontWeight: 'bold'
                                }
                            }, "🔍 Vendor Portal")
                        ),

                        // Sample Attractions
                        React.createElement('h3', {
                            style: { fontSize: '1.5rem', fontWeight: 'bold', marginBottom: '1rem', color: '#1f2937' }
                        }, "Featured Attractions"),
                        React.createElement('div', {
                            style: { display: 'grid', gridTemplateColumns: 'repeat(auto-fit, minmax(300px, 1fr))', gap: '1.5rem' }
                        }, attractions.map(attraction =>
                            React.createElement('div', {
                                key: attraction.id,
                                style: { 
                                    background: 'white', 
                                    borderRadius: '0.5rem', 
                                    overflow: 'hidden', 
                                    boxShadow: '0 4px 6px -1px rgba(0, 0, 0, 0.1)',
                                    cursor: 'pointer'
                                }
                            },
                                React.createElement('img', {
                                    src: attraction.image,
                                    alt: attraction.name,
                                    style: { width: '100%', height: '12rem', objectFit: 'cover' }
                                }),
                                React.createElement('div', {
                                    style: { padding: '1rem' }
                                },
                                    React.createElement('h4', {
                                        style: { fontSize: '1.125rem', fontWeight: 'bold', marginBottom: '0.5rem' }
                                    }, attraction.name),
                                    React.createElement('p', {
                                        style: { fontSize: '0.875rem', color: '#6b7280', marginBottom: '0.5rem' }
                                    }, attraction.description),
                                    React.createElement('div', {
                                        style: { display: 'flex', justifyContent: 'space-between', alignItems: 'center' }
                                    },
                                        React.createElement('span', {
                                            style: { fontSize: '0.875rem', color: '#6b7280' }
                                        }, attraction.location),
                                        React.createElement('div', {
                                            style: { display: 'flex', alignItems: 'center' }
                                        },
                                            React.createElement(Star, { style: { width: '1rem', height: '1rem', color: '#fbbf24' } }),
                                            React.createElement('span', {
                                                style: { marginLeft: '0.25rem', fontSize: '0.875rem' }
                                            }, attraction.rating)
                                        )
                                    )
                                )
                            )
                        ))
                    )
                );

                // Route to appropriate screen
                switch (currentScreen) {
                    case 'login':
                        return React.createElement(LoginScreen);
                    case '2fa':
                        return React.createElement(TwoFactorScreen);
                    case 'home':
                        return React.createElement(HomeScreen);
                    default:
                        return React.createElement(LoginScreen);
                }
            };

            // Render the app
            try {
                console.log('Rendering app...');
                ReactDOM.render(React.createElement(App), document.getElementById('root'));
                
                // Hide loading screen after successful render
                setTimeout(() => {
                    document.getElementById('loading').style.display = 'none';
                    console.log('App loaded successfully');
                }, 500);
                
            } catch (error) {
                console.error('Render error:', error);
                document.getElementById('loading').style.display = 'none';
                document.getElementById('error').style.display = 'flex';
            }

        }).catch(error => {
            console.error('Dependency loading error:', error);
            document.getElementById('loading').style.display = 'none';
            document.getElementById('error').style.display = 'flex';
        });

        // PWA Service Worker
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('/sw.js')
                    .then(registration => console.log('SW registered'))
                    .catch(error => console.log('SW registration failed'));
            });
        }
    </script>
</body>
</html>
