<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Palm Beach Pass - Vendor Portal</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/react/18.2.0/umd/react.production.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/react-dom/18.2.0/umd/react-dom.production.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/babel-standalone/7.23.5/babel.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/lucide/0.263.1/umd/lucide.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/qrcode-generator/1.4.4/qrcode.min.js"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/tailwindcss/2.2.19/tailwind.min.css" rel="stylesheet">
    <style>
        .scanner-frame {
            border: 3px solid #10B981;
            border-radius: 12px;
            animation: pulse 2s infinite;
        }
        
        @keyframes pulse {
            0%, 100% { border-color: #10B981; }
            50% { border-color: #059669; }
        }
        
        .scan-line {
            width: 100%;
            height: 2px;
            background: linear-gradient(90deg, transparent, #10B981, transparent);
            animation: scan 2s linear infinite;
        }
        
        @keyframes scan {
            0% { transform: translateY(-100px); }
            100% { transform: translateY(100px); }
        }
        
        .success-animation {
            animation: successPulse 0.6s ease-out;
        }
        
        @keyframes successPulse {
            0% { transform: scale(1); background-color: #10B981; }
            50% { transform: scale(1.05); background-color: #059669; }
            100% { transform: scale(1); background-color: #10B981; }
        }
        
        .denied-animation {
            animation: deniedShake 0.6s ease-out;
        }
        
        @keyframes deniedShake {
            0%, 100% { transform: translateX(0); background-color: #EF4444; }
            25% { transform: translateX(-5px); background-color: #DC2626; }
            75% { transform: translateX(5px); background-color: #DC2626; }
        }
        
        .chart-bar {
            transition: height 0.5s ease-in-out;
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useRef } = React;
        const { 
            Camera, Users, BarChart3, Settings, LogOut, Check, X, MapPin, 
            Clock, DollarSign, User, Eye, Shield, Scan, AlertCircle, 
            TrendingUp, Calendar, Search, Filter, Download
        } = lucide;

        // Shared vendor data and simulation
        const vendorData = {
            users: {
                'employee@demo.com': {
                    id: 1,
                    email: 'employee@demo.com',
                    password: 'demo',
                    name: 'Sarah Johnson',
                    role: 'employee',
                    attraction: 'Palm Beach Seaquarium',
                    permissions: ['scan'],
                    lastLogin: '2025-08-07T09:30:00Z'
                },
                'manager@demo.com': {
                    id: 2,
                    email: 'manager@demo.com',
                    password: 'demo',
                    name: 'Mike Chen',
                    role: 'manager',
                    attraction: 'Palm Beach Seaquarium',
                    permissions: ['scan', 'reports', 'manage_employees'],
                    lastLogin: '2025-08-07T08:15:00Z'
                },
                'owner@demo.com': {
                    id: 3,
                    email: 'owner@demo.com',
                    password: 'demo',
                    name: 'Jennifer Martinez',
                    role: 'owner',
                    attraction: 'Palm Beach Seaquarium',
                    permissions: ['scan', 'reports', 'manage_employees', 'financials', 'settings'],
                    lastLogin: '2025-08-07T07:45:00Z'
                }
            },
            
            mockPasses: [
                {
                    id: 'PB001-7D-ADT-001',
                    type: '7-day-adult',
                    customerName: 'John Smith',
                    activatedAt: '2025-08-05T10:00:00Z',
                    expiresAt: '2025-08-12T10:00:00Z',
                    scansRemaining: 5,
                    lastScanLocation: null,
                    geolocation: { lat: 26.4728, lng: -80.0726 }, // Palm Beach area
                    status: 'active'
                },
                {
                    id: 'PB002-3D-CHD-001',
                    type: '3-day-child',
                    customerName: 'Emma Davis',
                    activatedAt: '2025-08-06T14:30:00Z',
                    expiresAt: '2025-08-09T14:30:00Z',
                    scansRemaining: 2,
                    lastScanLocation: 'Boca Raton Museum',
                    lastScanTime: '2025-08-07T11:00:00Z',
                    geolocation: { lat: 26.4728, lng: -80.0726 },
                    status: 'active'
                },
                {
                    id: 'PB003-1D-ADT-002',
                    type: '1-day-adult',
                    customerName: 'Robert Wilson',
                    activatedAt: '2025-08-07T09:00:00Z',
                    expiresAt: '2025-08-07T23:59:59Z',
                    scansRemaining: 0,
                    lastScanLocation: 'Palm Beach Seaquarium',
                    lastScanTime: '2025-08-07T13:45:00Z',
                    geolocation: { lat: 26.4728, lng: -80.0726 },
                    status: 'expired'
                }
            ],
            
            scanHistory: [
                {
                    id: 1,
                    passId: 'PB001-7D-ADT-001',
                    customerName: 'John Smith',
                    scannedAt: '2025-08-07T14:30:00Z',
                    location: 'Palm Beach Seaquarium',
                    scannedBy: 'Sarah Johnson',
                    result: 'approved',
                    passType: '7-day-adult'
                },
                {
                    id: 2,
                    passId: 'PB002-3D-CHD-001',
                    customerName: 'Emma Davis',
                    scannedAt: '2025-08-07T13:15:00Z',
                    location: 'Palm Beach Seaquarium',
                    scannedBy: 'Mike Chen',
                    result: 'approved',
                    passType: '3-day-child'
                },
                {
                    id: 3,
                    passId: 'PB004-5D-ADT-003',
                    customerName: 'Lisa Brown',
                    scannedAt: '2025-08-07T12:00:00Z',
                    location: 'Palm Beach Seaquarium',
                    scannedBy: 'Sarah Johnson',
                    result: 'denied',
                    reason: 'Pass expired',
                    passType: '5-day-adult'
                },
                {
                    id: 4,
                    passId: 'PB001-7D-ADT-001',
                    customerName: 'John Smith',
                    scannedAt: '2025-08-07T10:45:00Z',
                    location: 'Palm Beach Seaquarium',
                    scannedBy: 'Sarah Johnson',
                    result: 'approved',
                    passType: '7-day-adult'
                }
            ],

            analytics: {
                today: {
                    totalScans: 24,
                    approvedScans: 21,
                    deniedScans: 3,
                    revenue: 420.00,
                    uniqueVisitors: 18
                },
                thisWeek: {
                    totalScans: 168,
                    approvedScans: 152,
                    deniedScans: 16,
                    revenue: 2940.00,
                    uniqueVisitors: 134
                },
                thisMonth: {
                    totalScans: 732,
                    approvedScans: 689,
                    deniedScans: 43,
                    revenue: 12180.00,
                    uniqueVisitors: 542
                },
                dailyData: [
                    { date: '8/1', scans: 28, revenue: 560 },
                    { date: '8/2', scans: 31, revenue: 620 },
                    { date: '8/3', scans: 25, revenue: 500 },
                    { date: '8/4', scans: 33, revenue: 660 },
                    { date: '8/5', scans: 29, revenue: 580 },
                    { date: '8/6', scans: 22, revenue: 440 },
                    { date: '8/7', scans: 24, revenue: 480 }
                ]
            }
        };

        const VendorPortal = () => {
            const [currentScreen, setCurrentScreen] = useState('login');
            const [user, setUser] = useState(null);
            const [scannedCode, setScannedCode] = useState('');
            const [scanResult, setScanResult] = useState(null);
            const [isScanning, setIsScanning] = useState(false);
            const [scanHistory, setScanHistory] = useState(vendorData.scanHistory);
            const [employeeList, setEmployeeList] = useState([]);
            const [selectedTimeRange, setSelectedTimeRange] = useState('today');
            const scannerRef = useRef(null);

            // Simulate geolocation check
            const checkGeolocation = () => {
                // In real implementation, this would use navigator.geolocation
                return new Promise((resolve) => {
                    setTimeout(() => {
                        resolve({ lat: 26.4728, lng: -80.0726 }); // Palm Beach area
                    }, 500);
                });
            };

            // Simulate QR code validation
            const validateQRCode = async (code) => {
                const pass = vendorData.mockPasses.find(p => p.id === code);
                
                if (!pass) {
                    return { valid: false, reason: 'Invalid pass code' };
                }
                
                const now = new Date();
                const expiry = new Date(pass.expiresAt);
                
                if (now > expiry) {
                    return { valid: false, reason: 'Pass expired' };
                }
                
                // Check time restriction (1 hour between scans)
                if (pass.lastScanTime) {
                    const lastScan = new Date(pass.lastScanTime);
                    const timeDiff = (now - lastScan) / (1000 * 60); // minutes
                    if (timeDiff < 60) {
                        return { valid: false, reason: 'Too soon since last scan' };
                    }
                }
                
                // Check location (simplified)
                const location = await checkGeolocation();
                const distance = Math.sqrt(
                    Math.pow(location.lat - pass.geolocation.lat, 2) + 
                    Math.pow(location.lng - pass.geolocation.lng, 2)
                );
                
                if (distance > 0.01) { // ~1km tolerance
                    return { valid: false, reason: 'Location mismatch' };
                }
                
                return { 
                    valid: true, 
                    pass: pass,
                    customer: pass.customerName,
                    type: pass.type
                };
            };

            // Login Screen
            const LoginScreen = () => {
                const [email, setEmail] = useState('employee@demo.com');
                const [password, setPassword] = useState('demo');
                const [selectedRole, setSelectedRole] = useState('employee');

                const handleLogin = () => {
                    const userData = vendorData.users[email];
                    if (userData && userData.password === password) {
                        setUser(userData);
                        setCurrentScreen('dashboard');
                    } else {
                        alert('Invalid credentials. Try employee@demo.com, manager@demo.com, or owner@demo.com with password: demo');
                    }
                };

                const handleRoleSelect = (role) => {
                    setSelectedRole(role);
                    switch(role) {
                        case 'employee':
                            setEmail('employee@demo.com');
                            break;
                        case 'manager':
                            setEmail('manager@demo.com');
                            break;
                        case 'owner':
                            setEmail('owner@demo.com');
                            break;
                    }
                };

                return React.createElement('div', {
                    className: "min-h-screen bg-gradient-to-br from-purple-600 to-blue-600 flex items-center justify-center p-4"
                },
                    React.createElement('div', {
                        className: "bg-white rounded-lg shadow-2xl p-8 w-full max-w-md"
                    },
                        React.createElement('div', {
                            className: "text-center mb-8"
                        },
                            React.createElement('div', {
                                className: "w-16 h-16 bg-purple-600 rounded-lg mx-auto mb-4 flex items-center justify-center"
                            }, React.createElement(Shield, { className: "w-8 h-8 text-white" })),
                            React.createElement('h1', {
                                className: "text-2xl font-bold text-gray-800"
                            }, "Vendor Portal"),
                            React.createElement('p', {
                                className: "text-gray-600"
                            }, "Palm Beach Pass Scanner")
                        ),
                        
                        React.createElement('div', {
                            className: "mb-6"
                        },
                            React.createElement('p', {
                                className: "text-sm text-gray-700 mb-3"
                            }, "Select your role:"),
                            React.createElement('div', {
                                className: "grid grid-cols-3 gap-2"
                            },
                                ['employee', 'manager', 'owner'].map(role => 
                                    React.createElement('button', {
                                        key: role,
                                        onClick: () => handleRoleSelect(role),
                                        className: `p-3 rounded border-2 transition-all ${selectedRole === role 
                                            ? 'border-purple-600 bg-purple-50 text-purple-800' 
                                            : 'border-gray-200 hover:border-gray-300'}`
                                    },
                                        React.createElement('div', {
                                            className: "text-xs font-semibold"
                                        }, role.toUpperCase()),
                                        React.createElement('div', {
                                            className: "text-xs text-gray-500 mt-1"
                                        }, 
                                            role === 'employee' ? 'Scan Only' :
                                            role === 'manager' ? 'Scan + Reports' :
                                            'Full Access'
                                        )
                                    )
                                )
                            )
                        ),
                        
                        React.createElement('div', {
                            className: "space-y-4"
                        },
                            React.createElement('div', null,
                                React.createElement('label', {
                                    className: "block text-sm font-medium text-gray-700 mb-2"
                                }, "Email"),
                                React.createElement('input', {
                                    type: "email",
                                    value: email,
                                    onChange: (e) => setEmail(e.target.value),
                                    className: "w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-500"
                                })
                            ),
                            React.createElement('div', null,
                                React.createElement('label', {
                                    className: "block text-sm font-medium text-gray-700 mb-2"
                                }, "Password"),
                                React.createElement('input', {
                                    type: "password",
                                    value: password,
                                    onChange: (e) => setPassword(e.target.value),
                                    className: "w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-500"
                                })
                            ),
                            React.createElement('button', {
                                onClick: handleLogin,
                                className: "w-full bg-purple-600 text-white py-2 px-4 rounded-md hover:bg-purple-700 transition-colors"
                            }, "Sign In"),
                            React.createElement('p', {
                                className: "text-xs text-gray-500 text-center mt-4"
                            }, "Demo: All passwords are 'demo'")
                        )
                    )
                );
            };

            // Header Component
            const Header = () => React.createElement('header', {
                className: "bg-white shadow-sm border-b"
            },
                React.createElement('div', {
                    className: "max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"
                },
                    React.createElement('div', {
                        className: "flex justify-between items-center h-16"
                    },
                        React.createElement('div', {
                            className: "flex items-center"
                        },
                            React.createElement('div', {
                                className: "w-8 h-8 bg-purple-600 rounded-lg flex items-center justify-center"
                            }, React.createElement(Shield, { className: "w-5 h-5 text-white" })),
                            React.createElement('div', {
                                className: "ml-3"
                            },
                                React.createElement('span', {
                                    className: "text-xl font-bold text-gray-800"
                                }, "Vendor Portal"),
                                React.createElement('p', {
                                    className: "text-sm text-gray-600"
                                }, user?.attraction)
                            )
                        ),
                        React.createElement('div', {
                            className: "flex items-center space-x-4"
                        },
                            React.createElement('div', {
                                className: "text-right"
                            },
                                React.createElement('p', {
                                    className: "text-sm font-medium text-gray-900"
                                }, user?.name),
                                React.createElement('p', {
                                    className: "text-xs text-gray-500 capitalize"
                                }, user?.role)
                            ),
                            React.createElement('button', {
                                onClick: () => {
                                    setUser(null);
                                    setCurrentScreen('login');
                                },
                                className: "p-2 text-gray-600 hover:text-gray-800"
                            }, React.createElement(LogOut, { className: "w-5 h-5" }))
                        )
                    )
                )
            );

            // QR Scanner Component
            const QRScanner = () => {
                const [manualEntry, setManualEntry] = useState(false);
                const [scanAnimation, setScanAnimation] = useState('');

                const handleScan = async () => {
                    if (!scannedCode.trim()) {
                        alert('Please enter a pass code to scan');
                        return;
                    }

                    setIsScanning(true);
                    setScanResult(null);

                    try {
                        // Simulate scanning delay
                        await new Promise(resolve => setTimeout(resolve, 1500));
                        
                        const result = await validateQRCode(scannedCode.trim());
                        
                        if (result.valid) {
                            setScanAnimation('success-animation');
                            setScanResult({
                                success: true,
                                customer: result.customer,
                                passType: result.type,
                                message: 'Pass validated successfully'
                            });

                            // Add to scan history
                            const newScan = {
                                id: scanHistory.length + 1,
                                passId: scannedCode.trim(),
                                customerName: result.customer,
                                scannedAt: new Date().toISOString(),
                                location: user.attraction,
                                scannedBy: user.name,
                                result: 'approved',
                                passType: result.type
                            };
                            setScanHistory([newScan, ...scanHistory]);
                        } else {
                            setScanAnimation('denied-animation');
                            setScanResult({
                                success: false,
                                message: result.reason || 'Access denied'
                            });

                            // Add denied scan to history
                            const newScan = {
                                id: scanHistory.length + 1,
                                passId: scannedCode.trim(),
                                customerName: 'Unknown',
                                scannedAt: new Date().toISOString(),
                                location: user.attraction,
                                scannedBy: user.name,
                                result: 'denied',
                                reason: result.reason
                            };
                            setScanHistory([newScan, ...scanHistory]);
                        }
                    } catch (error) {
                        setScanAnimation('denied-animation');
                        setScanResult({
                            success: false,
                            message: 'Scanner error occurred'
                        });
                    }

                    setIsScanning(false);
                    setTimeout(() => setScanAnimation(''), 600);
                };

                const resetScanner = () => {
                    setScannedCode('');
                    setScanResult(null);
                    setScanAnimation('');
                };

                return React.createElement('div', {
                    className: "max-w-md mx-auto p-6"
                },
                    React.createElement('div', {
                        className: "text-center mb-6"
                    },
                        React.createElement('h2', {
                            className: "text-2xl font-bold text-gray-800 mb-2"
                        }, "QR Code Scanner"),
                        React.createElement('p', {
                            className: "text-gray-600"
                        }, "Scan or enter Palm Beach Pass code")
                    ),

                    // Scanner Interface
                    React.createElement('div', {
                        className: `relative bg-gray-100 rounded-lg p-8 mb-6 scanner-frame ${scanAnimation}`,
                        ref: scannerRef
                    },
                        React.createElement('div', {
                            className: "text-center"
                        },
                            !scanResult ? (
                                isScanning ? (
                                    React.createElement('div', null,
                                        React.createElement(Scan, { 
                                            className: "w-16 h-16 text-purple-600 mx-auto mb-4 animate-spin" 
                                        }),
                                        React.createElement('p', {
                                            className: "text-lg font-medium text-gray-800"
                                        }, "Scanning..."),
                                        React.createElement('div', {
                                            className: "scan-line mt-4"
                                        })
                                    )
                                ) : (
                                    React.createElement('div', null,
                                        React.createElement(Camera, { 
                                            className: "w-16 h-16 text-gray-400 mx-auto mb-4" 
                                        }),
                                        React.createElement('p', {
                                            className: "text-gray-600"
                                        }, "Position QR code within frame")
                                    )
                                )
                            ) : (
                                React.createElement('div', null,
                                    scanResult.success ? (
                                        React.createElement('div', null,
                                            React.createElement(Check, { 
                                                className: "w-16 h-16 text-green-600 mx-auto mb-4" 
                                            }),
                                            React.createElement('p', {
                                                className: "text-lg font-bold text-green-800 mb-2"
                                            }, "ACCESS GRANTED"),
                                            React.createElement('p', {
                                                className: "text-gray-700"
                                            }, `Customer: ${scanResult.customer}`),
                                            React.createElement('p', {
                                                className: "text-gray-600 text-sm"
                                            }, `Pass Type: ${scanResult.passType}`)
                                        )
                                    ) : (
                                        React.createElement('div', null,
                                            React.createElement(X, { 
                                                className: "w-16 h-16 text-red-600 mx-auto mb-4" 
                                            }),
                                            React.createElement('p', {
                                                className: "text-lg font-bold text-red-800 mb-2"
                                            }, "ACCESS DENIED"),
                                            React.createElement('p', {
                                                className: "text-gray-700"
                                            }, scanResult.message)
                                        )
                                    )
                                )
                            )
                        )
                    ),

                    // Manual Entry
                    React.createElement('div', {
                        className: "space-y-4"
                    },
                        React.createElement('div', null,
                            React.createElement('label', {
                                className: "block text-sm font-medium text-gray-700 mb-2"
                            }, "Pass Code"),
                            React.createElement('input', {
                                type: "text",
                                value: scannedCode,
                                onChange: (e) => setScannedCode(e.target.value.toUpperCase()),
                                placeholder: "Enter pass code (e.g., PB001-7D-ADT-001)",
                                className: "w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-500"
                            })
                        ),
                        
                        React.createElement('div', {
                            className: "flex space-x-2"
                        },
                            React.createElement('button', {
                                onClick: handleScan,
                                disabled: isScanning || !scannedCode.trim(),
                                className: "flex-1 bg-purple-600 text-white py-2 px-4 rounded-md hover:bg-purple-700 disabled:bg-gray-400 transition-colors"
                            }, isScanning ? "Scanning..." : "Validate Pass"),
                            React.createElement('button', {
                                onClick: resetScanner,
                                className: "px-4 py-2 border border-gray-300 rounded-md hover:bg-gray-50 transition-colors"
                            }, "Reset")
                        ),
                        
                        React.createElement('p', {
                            className: "text-xs text-gray-500 text-center"
                        }, "Demo codes: PB001-7D-ADT-001, PB002-3D-CHD-001, PB003-1D-ADT-002")
                    )
                );
            };

            // Reports Component (Manager/Owner only)
            const Reports = () => {
                const analytics = vendorData.analytics[selectedTimeRange];
                const approvalRate = ((analytics.approvedScans / analytics.totalScans) * 100).toFixed(1);

                return React.createElement('div', {
                    className: "max-w-6xl mx-auto p-6"
                },
                    React.createElement('div', {
                        className: "flex justify-between items-center mb-6"
                    },
                        React.createElement('h2', {
                            className: "text-2xl font-bold text-gray-800"
                        }, "Analytics & Reports"),
                        React.createElement('div', {
                            className: "flex space-x-2"
                        },
                            ['today', 'thisWeek', 'thisMonth'].map(range => 
                                React.createElement('button', {
                                    key: range,
                                    onClick: () => setSelectedTimeRange(range),
                                    className: `px-4 py-2 rounded ${selectedTimeRange === range 
                                        ? 'bg-purple-600 text-white' 
                                        : 'bg-gray-200 text-gray-700 hover:bg-gray-300'}`
                                }, range === 'today' ? 'Today' : range === 'thisWeek' ? 'This Week' : 'This Month')
                            )
                        )
                    ),

                    // Stats Cards
                    React.createElement('div', {
                        className: "grid grid-cols-1 md:grid-cols-4 gap-6 mb-8"
                    },
                        [
                            { label: 'Total Scans', value: analytics.totalScans, icon: Scan, color: 'blue' },
                            { label: 'Approved', value: analytics.approvedScans, icon: Check, color: 'green' },
                            { label: 'Denied', value: analytics.deniedScans, icon: X, color: 'red' },
                            { label: 'Revenue', value: `$${analytics.revenue}`, icon: DollarSign, color: 'purple' }
                        ].map((stat, index) => 
                            React.createElement('div', {
                                key: index,
                                className: "bg-white rounded-lg shadow-md p-6"
                            },
                                React.createElement('div', {
                                    className: "flex items-center justify-between"
                                },
                                    React.createElement('div', null,
                                        React.createElement('p', {
                                            className: "text-sm text-gray-600"
                                        }, stat.label),
                                        React.createElement('p', {
                                            className: "text-2xl font-bold text-gray-800"
                                        }, stat.value)
                                    ),
                                    React.createElement(stat.icon, { 
                                        className: `w-8 h-8 text-${stat.color}-600` 
                                    })
                                )
                            )
                        )
                    ),

                    // Chart
                    React.createElement('div', {
                        className: "bg-white rounded-lg shadow-md p-6 mb-8"
                    },
                        React.createElement('h3', {
                            className: "text-lg font-semibold text-gray-800 mb-4"
                        }, "Daily Activity"),
                        React.createElement('div', {
                            className: "h-64 flex items-end space-x-2"
                        }, vendorData.analytics.dailyData.map((day, index) => 
                            React.createElement('div', {
                                key: index,
                                className: "flex-1 flex flex-col items-center"
                            },
                                React.createElement('div', {
                                    className: `bg-purple-600 chart-bar transition-all duration-500`,
                                    style: { height: `${(day.scans / 35) * 200}px`, width: '100%' }
                                }),
                                React.createElement('p', {
                                    className: "text-xs text-gray-600 mt-2"
                                }, day.date),
                                React.createElement('p', {
                                    className: "text-xs text-gray-500"
                                }, day.scans)
                            )
                        ))
                    ),

                    // Recent Scans
                    React.createElement('div', {
                        className: "bg-white rounded-lg shadow-md p-6"
                    },
                        React.createElement('h3', {
                            className: "text-lg font-semibold text-gray-800 mb-4"
                        }, "Recent Scans"),
                        React.createElement('div', {
                            className: "overflow-x-auto"
                        },
                            React.createElement('table', {
                                className: "w-full text-sm"
                            },
                                React.createElement('thead', null,
                                    React.createElement('tr', {
                                        className: "border-b"
                                    },
                                        ['Time', 'Customer', 'Pass ID', 'Type', 'Result', 'Scanned By'].map(header => 
                                            React.createElement('th', {
                                                key: header,
                                                className: "text-left p-2 font-medium text-gray-700"
                                            }, header)
                                        )
                                    )
                                ),
                                React.createElement('tbody', null,
                                    scanHistory.slice(0, 10).map((scan, index) => 
                                        React.createElement('tr', {
                                            key: index,
                                            className: "border-b hover:bg-gray-50"
                                        },
                                            React.createElement('td', {
                                                className: "p-2"
                                            }, new Date(scan.scannedAt).toLocaleTimeString()),
                                            React.createElement('td', {
                                                className: "p-2"
                                            }, scan.customerName),
                                            React.createElement('td', {
                                                className: "p-2 font-mono text-xs"
                                            }, scan.passId),
                                            React.createElement('td', {
                                                className: "p-2"
                                            }, scan.passType || 'N/A'),
                                            React.createElement('td', {
                                                className: "p-2"
                                            }, React.createElement('span', {
                                                className: `px-2 py-1 rounded text-xs ${scan.result === 'approved' 
                                                    ? 'bg-green-100 text-green-800' 
                                                    : 'bg-red-100 text-red-800'}`
                                            }, scan.result.toUpperCase())),
                                            React.createElement('td', {
                                                className: "p-2"
                                            }, scan.scannedBy)
                                        )
                                    )
                                )
                            )
                        )
                    )
                );
            };

            // Employee Management (Manager/Owner only)
            const EmployeeManagement = () => {
                const [showAddUser, setShowAddUser] = useState(false);
                const [newUser, setNewUser] = useState({ name: '', email: '', role: 'employee' });

                const employees = Object.values(vendorData.users).filter(u => 
                    u.attraction === user.attraction && u.role !== 'owner'
                );

                return React.createElement('div', {
                    className: "max-w-4xl mx-auto p-6"
                },
                    React.createElement('div', {
                        className: "flex justify-between items-center mb-6"
                    },
                        React.createElement('h2', {
                            className: "text-2xl font-bold text-gray-800"
                        }, "Employee Management"),
                        React.createElement('button', {
                            onClick: () => setShowAddUser(true),
                            className: "bg-purple-600 text-white px-4 py-2 rounded-md hover:bg-purple-700"
                        }, "Add Employee")
                    ),

                    React.createElement('div', {
                        className: "bg-white rounded-lg shadow-md"
                    },
                        React.createElement('div', {
                            className: "overflow-x-auto"
                        },
                            React.createElement('table', {
                                className: "w-full"
                            },
                                React.createElement('thead', {
                                    className: "bg-gray-50"
                                },
                                    React.createElement('tr', null,
                                        ['Name', 'Email', 'Role', 'Last Login', 'Status', 'Actions'].map(header => 
                                            React.createElement('th', {
                                                key: header,
                                                className: "text-left p-4 font-medium text-gray-700"
                                            }, header)
                                        )
                                    )
                                ),
                                React.createElement('tbody', null,
                                    employees.map((employee, index) => 
                                        React.createElement('tr', {
                                            key: index,
                                            className: "border-b hover:bg-gray-50"
                                        },
                                            React.createElement('td', {
                                                className: "p-4"
                                            }, employee.name),
                                            React.createElement('td', {
                                                className: "p-4"
                                            }, employee.email),
                                            React.createElement('td', {
                                                className: "p-4"
                                            },
                                                React.createElement('span', {
                                                    className: `px-2 py-1 rounded text-xs capitalize ${
                                                        employee.role === 'manager' 
                                                            ? 'bg-blue-100 text-blue-800' 
                                                            : 'bg-gray-100 text-gray-800'
                                                    }`
                                                }, employee.role)
                                            ),
                                            React.createElement('td', {
                                                className: "p-4"
                                            }, new Date(employee.lastLogin).toLocaleDateString()),
                                            React.createElement('td', {
                                                className: "p-4"
                                            },
                                                React.createElement('span', {
                                                    className: "px-2 py-1 rounded text-xs bg-green-100 text-green-800"
                                                }, "Active")
                                            ),
                                            React.createElement('td', {
                                                className: "p-4"
                                            },
                                                React.createElement('button', {
                                                    className: "text-purple-600 hover:text-purple-800 text-sm"
                                                }, "Edit")
                                            )
                                        )
                                    )
                                )
                            )
                        )
                    )
                );
            };

            // Bottom Navigation
            const BottomNav = () => {
                const navItems = [
                    { id: 'scanner', icon: Scan, label: 'Scanner', permissions: ['scan'] },
                    { id: 'reports', icon: BarChart3, label: 'Reports', permissions: ['reports'] },
                    { id: 'employees', icon: Users, label: 'Team', permissions: ['manage_employees'] }
                ];

                const filteredItems = navItems.filter(item => 
                    item.permissions.some(permission => user?.permissions.includes(permission))
                );

                return React.createElement('nav', {
                    className: "fixed bottom-0 left-0 right-0 bg-white border-t shadow-lg"
                },
                    React.createElement('div', {
                        className: "flex justify-around py-2"
                    }, filteredItems.map(item => 
                        React.createElement('button', {
                            key: item.id,
                            onClick: () => setCurrentScreen(item.id),
                            className: `flex flex-col items-center p-2 ${
                                currentScreen === item.id ? 'text-purple-600' : 'text-gray-600'
                            }`
                        },
                            React.createElement(item.icon, { 
                                className: `w-6 h-6 ${currentScreen === item.id ? 'text-purple-600' : 'text-gray-600'}` 
                            }),
                            React.createElement('span', {
                                className: "text-xs mt-1"
                            }, item.label)
                        )
                    ))
                );
            };

            // Main Dashboard Content
            const renderMainContent = () => {
                switch (currentScreen) {
                    case 'scanner':
                        return React.createElement(QRScanner);
                    case 'reports':
                        return user?.permissions.includes('reports') 
                            ? React.createElement(Reports) 
                            : React.createElement('div', { className: "p-6 text-center" }, 
                                React.createElement('p', null, "Access denied. Reports require manager privileges."));
                    case 'employees':
                        return user?.permissions.includes('manage_employees') 
                            ? React.createElement(EmployeeManagement) 
                            : React.createElement('div', { className: "p-6 text-center" }, 
                                React.createElement('p', null, "Access denied. Employee management requires manager privileges."));
                    default:
                        return React.createElement(QRScanner);
                }
            };

            // Main render logic
            if (currentScreen === 'login') {
                return React.createElement(LoginScreen);
            }

            return React.createElement('div', {
                className: "min-h-screen bg-gray-100 pb-20"
            },
                React.createElement(Header),
                React.createElement('main', null, renderMainContent()),
                React.createElement(BottomNav)
            );
        };

        ReactDOM.render(React.createElement(VendorPortal), document.getElementById('root'));
    </script>
</body>
</html>
