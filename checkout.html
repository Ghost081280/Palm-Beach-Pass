<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Checkout - Palm Beach Pass</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/react/18.2.0/umd/react.production.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/react-dom/18.2.0/umd/react-dom.production.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/babel-standalone/7.23.5/babel.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/lucide/0.263.1/umd/lucide.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/qrcode-generator/1.4.4/qrcode.min.js"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/tailwindcss/2.2.19/tailwind.min.css" rel="stylesheet">
    <style>
        .checkout-step {
            transition: all 0.3s ease-in-out;
        }
        
        .checkout-step.active {
            transform: scale(1.02);
            box-shadow: 0 8px 25px 0 rgba(31, 38, 135, 0.2);
        }
        
        .checkout-step.completed {
            opacity: 0.8;
            transform: scale(0.98);
        }
        
        .payment-processing {
            animation: pulse-payment 2s infinite;
        }
        
        @keyframes pulse-payment {
            0%, 100% { 
                background: linear-gradient(135deg, #10B981 0%, #059669 100%);
                transform: scale(1);
            }
            50% { 
                background: linear-gradient(135deg, #059669 0%, #047857 100%);
                transform: scale(1.02);
            }
        }
        
        .success-animation {
            animation: successBounce 0.6s ease-out;
        }
        
        @keyframes successBounce {
            0% { transform: scale(0.8); opacity: 0; }
            50% { transform: scale(1.1); opacity: 1; }
            100% { transform: scale(1); opacity: 1; }
        }
        
        .cart-item {
            animation: slideInFromRight 0.3s ease-out;
        }
        
        @keyframes slideInFromRight {
            from { transform: translateX(100%); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }
        
        .pass-preview {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            box-shadow: 0 8px 32px 0 rgba(31, 38, 135, 0.37);
            backdrop-filter: blur(4px);
            border: 1px solid rgba(255, 255, 255, 0.18);
        }
        
        .form-field {
            transition: all 0.2s ease-in-out;
        }
        
        .form-field:focus-within {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(59, 130, 246, 0.15);
        }
        
        .promo-applied {
            animation: promoSuccess 0.5s ease-out;
        }
        
        @keyframes promoSuccess {
            0% { background-color: #10B981; transform: scale(1.05); }
            100% { background-color: #F3F4F6; transform: scale(1); }
        }
        
        .total-highlight {
            animation: totalPulse 1s ease-in-out;
        }
        
        @keyframes totalPulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }
        
        .loading-dots::after {
            content: '';
            animation: dots 2s infinite;
        }
        
        @keyframes dots {
            0%, 20% { content: '.'; }
            40% { content: '..'; }
            60%, 100% { content: '...'; }
        }
        
        .secure-badge {
            background: linear-gradient(45deg, #10B981, #059669);
            animation: secureGlow 3s infinite;
        }
        
        @keyframes secureGlow {
            0%, 100% { box-shadow: 0 0 5px rgba(16, 185, 129, 0.3); }
            50% { box-shadow: 0 0 20px rgba(16, 185, 129, 0.6); }
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useRef } = React;
        const { 
            ShoppingCart, CreditCard, Lock, Check, X, ArrowLeft, ArrowRight,
            User, Mail, Phone, MapPin, Calendar, Eye, EyeOff, Gift, Tag,
            Smartphone, Shield, Zap, Clock, Star, AlertCircle, Info,
            DollarSign, Percent, Download, Share, RefreshCw
        } = lucide;

        // Checkout data and pricing
        const checkoutData = {
            passPrices: {
                1: { adult: 35.00, child: 25.00, savings: 145.00 },
                2: { adult: 55.00, child: 35.00, savings: 285.00 },
                3: { adult: 70.00, child: 45.00, savings: 430.00 },
                5: { adult: 85.00, child: 55.00, savings: 615.00 },
                7: { adult: 95.00, child: 65.00, savings: 745.00 }
            },
            
            promoCodes: {
                'WELCOME10': { discount: 10, type: 'percentage', description: '10% off your first purchase' },
                'SUMMER25': { discount: 25, type: 'percentage', description: '25% off summer special' },
                'SAVE20': { discount: 20, type: 'fixed', description: '$20 off any purchase' },
                'FAMILY15': { discount: 15, type: 'percentage', description: '15% off family passes' }
            },

            paymentMethods: [
                { id: 'card', name: 'Credit/Debit Card', icon: CreditCard, popular: true },
                { id: 'apple', name: 'Apple Pay', icon: Smartphone, popular: true },
                { id: 'google', name: 'Google Pay', icon: Smartphone, popular: false },
                { id: 'paypal', name: 'PayPal', icon: DollarSign, popular: false }
            ]
        };

        // Generate pass ID
        const generatePassId = (duration, type, sequence = 1) => {
            const prefix = 'PB';
            const randomNum = String(Math.floor(Math.random() * 1000)).padStart(3, '0');
            const durationCode = duration + 'D';
            const typeCode = type === 'adult' ? 'ADT' : 'CHD';
            const seqCode = String(sequence).padStart(3, '0');
            return `${prefix}${randomNum}-${durationCode}-${typeCode}-${seqCode}`;
        };

        // Generate QR code
        const generateQRCode = (passId) => {
            const qr = qrcode(0, 'M');
            qr.addData(passId);
            qr.make();
            return qr.createDataURL(8, 2);
        };

        const CheckoutApp = () => {
            const [currentStep, setCurrentStep] = useState('cart');
            const [cart, setCart] = useState([
                { 
                    id: 1, 
                    duration: 7, 
                    type: 'adult', 
                    quantity: 1, 
                    name: '7-Day Adult Pass',
                    price: 95.00,
                    originalPrice: 840.00,
                    savings: 745.00
                },
                { 
                    id: 2, 
                    duration: 3, 
                    type: 'child', 
                    quantity: 1, 
                    name: '3-Day Child Pass',
                    price: 45.00,
                    originalPrice: 360.00,
                    savings: 315.00
                }
            ]);
            
            const [customerInfo, setCustomerInfo] = useState({
                firstName: 'John',
                lastName: 'Smith',
                email: 'demo@demo.com',
                phone: '+1 (555) 123-4567',
                acceptTerms: false,
                receiveUpdates: true
            });

            const [paymentInfo, setPaymentInfo] = useState({
                method: 'card',
                cardNumber: '4532 1234 5678 9012',
                expiryMonth: '12',
                expiryYear: '2027',
                cvv: '123',
                nameOnCard: 'John Smith',
                saveCard: false
            });

            const [promoCode, setPromoCode] = useState('');
            const [appliedPromo, setAppliedPromo] = useState(null);
            const [isProcessing, setIsProcessing] = useState(false);
            const [purchaseComplete, setPurchaseComplete] = useState(false);
            const [generatedPasses, setGeneratedPasses] = useState([]);
            const [showCardDetails, setShowCardDetails] = useState(false);

            // Calculate totals
            const subtotal = cart.reduce((sum, item) => sum + (item.price * item.quantity), 0);
            const totalSavings = cart.reduce((sum, item) => sum + (item.savings * item.quantity), 0);
            const promoDiscount = appliedPromo ? 
                (appliedPromo.type === 'percentage' ? subtotal * (appliedPromo.discount / 100) : appliedPromo.discount) : 0;
            const total = Math.max(0, subtotal - promoDiscount);

            // Apply promo code
            const applyPromoCode = () => {
                const promo = checkoutData.promoCodes[promoCode.toUpperCase()];
                if (promo) {
                    setAppliedPromo({ ...promo, code: promoCode.toUpperCase() });
                    setPromoCode('');
                } else {
                    alert('Invalid promo code. Try: WELCOME10, SUMMER25, SAVE20, or FAMILY15');
                }
            };

            // Process payment
            const processPayment = async () => {
                setIsProcessing(true);
                
                // Simulate payment processing
                await new Promise(resolve => setTimeout(resolve, 3000));
                
                // Generate passes
                const newPasses = cart.map((item, index) => ({
                    id: generatePassId(item.duration, item.type, index + 1),
                    ...item,
                    customerName: `${customerInfo.firstName} ${customerInfo.lastName}`,
                    purchasedAt: new Date().toISOString(),
                    status: 'inactive',
                    qrCode: null // Will be generated when needed
                }));

                // Add QR codes
                newPasses.forEach(pass => {
                    pass.qrCode = generateQRCode(pass.id);
                });

                setGeneratedPasses(newPasses);
                setIsProcessing(false);
                setPurchaseComplete(true);
                setCurrentStep('confirmation');
            };

            // Header Component
            const Header = () => React.createElement('header', {
                className: "bg-white shadow-sm border-b sticky top-0 z-50"
            },
                React.createElement('div', {
                    className: "max-w-4xl mx-auto px-4 py-3"
                },
                    React.createElement('div', {
                        className: "flex items-center justify-between"
                    },
                        React.createElement('div', {
                            className: "flex items-center space-x-3"
                        },
                            React.createElement('button', {
                                onClick: () => window.history.back(),
                                className: "p-1 text-gray-600 hover:text-gray-800"
                            }, React.createElement(ArrowLeft, { className: "w-5 h-5" })),
                            React.createElement('div', null,
                                React.createElement('h1', {
                                    className: "text-xl font-bold text-gray-800"
                                }, purchaseComplete ? 'Purchase Complete' : 'Checkout'),
                                React.createElement('p', {
                                    className: "text-sm text-gray-600"
                                }, 'Palm Beach Pass')
                            )
                        ),
                        React.createElement('div', {
                            className: "secure-badge text-white px-3 py-1 rounded-full flex items-center space-x-1"
                        },
                            React.createElement(Shield, { className: "w-4 h-4" }),
                            React.createElement('span', { className: "text-xs font-medium" }, "Secure")
                        )
                    )
                )
            );

            // Progress Indicator
            const ProgressIndicator = () => {
                const steps = [
                    { id: 'cart', label: 'Cart', icon: ShoppingCart },
                    { id: 'info', label: 'Info', icon: User },
                    { id: 'payment', label: 'Payment', icon: CreditCard },
                    { id: 'confirmation', label: 'Complete', icon: Check }
                ];

                const currentIndex = steps.findIndex(step => step.id === currentStep);

                return React.createElement('div', {
                    className: "bg-white border-b px-4 py-4"
                },
                    React.createElement('div', {
                        className: "max-w-4xl mx-auto"
                    },
                        React.createElement('div', {
                            className: "flex items-center justify-between"
                        }, steps.map((step, index) => 
                            React.createElement('div', {
                                key: step.id,
                                className: "flex items-center"
                            },
                                React.createElement('div', {
                                    className: `flex items-center space-x-2 ${
                                        index <= currentIndex ? 'text-blue-600' : 'text-gray-400'
                                    }`
                                },
                                    React.createElement('div', {
                                        className: `w-8 h-8 rounded-full flex items-center justify-center ${
                                            index < currentIndex ? 'bg-green-600 text-white' :
                                            index === currentIndex ? 'bg-blue-600 text-white' :
                                            'bg-gray-200 text-gray-400'
                                        }`
                                    }, index < currentIndex ? React.createElement(Check, { className: "w-4 h-4" }) : React.createElement(step.icon, { className: "w-4 h-4" })),
                                    React.createElement('span', {
                                        className: "text-sm font-medium hidden sm:inline"
                                    }, step.label)
                                ),
                                index < steps.length - 1 && React.createElement('div', {
                                    className: `w-8 sm:w-16 h-0.5 mx-2 ${
                                        index < currentIndex ? 'bg-green-600' : 'bg-gray-200'
                                    }`
                                })
                            )
                        ))
                    )
                );
            };

            // Cart Step
            const CartStep = () => React.createElement('div', {
                className: "checkout-step active"
            },
                React.createElement('div', {
                    className: "bg-white rounded-lg shadow-md p-6 mb-6"
                },
                    React.createElement('h2', {
                        className: "text-xl font-bold text-gray-800 mb-4"
                    }, "Your Order"),
                    
                    React.createElement('div', {
                        className: "space-y-4 mb-6"
                    }, cart.map(item => 
                        React.createElement('div', {
                            key: item.id,
                            className: "cart-item flex items-center justify-between p-4 border border-gray-200 rounded-lg"
                        },
                            React.createElement('div', {
                                className: "flex-1"
                            },
                                React.createElement('h3', {
                                    className: "font-semibold text-gray-800"
                                }, item.name),
                                React.createElement('p', {
                                    className: "text-sm text-gray-600"
                                }, `Access to 156+ attractions for ${item.duration} days`),
                                React.createElement('div', {
                                    className: "flex items-center space-x-2 mt-1"
                                },
                                    React.createElement('span', {
                                        className: "text-xs text-gray-500 line-through"
                                    }, `$${item.originalPrice.toFixed(0)}`),
                                    React.createElement('span', {
                                        className: "text-sm font-medium text-green-600"
                                    }, `Save $${item.savings.toFixed(0)}`)
                                )
                            ),
                            React.createElement('div', {
                                className: "text-right"
                            },
                                React.createElement('p', {
                                    className: "text-lg font-bold text-gray-800"
                                }, `$${item.price.toFixed(2)}`),
                                React.createElement('p', {
                                    className: "text-sm text-gray-600"
                                }, `Qty: ${item.quantity}`)
                            )
                        )
                    )),

                    // Promo Code Section
                    React.createElement('div', {
                        className: "border-t pt-4"
                    },
                        React.createElement('div', {
                            className: "flex space-x-2 mb-4"
                        },
                            React.createElement('input', {
                                type: "text",
                                value: promoCode,
                                onChange: (e) => setPromoCode(e.target.value.toUpperCase()),
                                placeholder: "Enter promo code",
                                className: "flex-1 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"
                            }),
                            React.createElement('button', {
                                onClick: applyPromoCode,
                                disabled: !promoCode.trim(),
                                className: "px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:bg-gray-400"
                            }, "Apply")
                        ),

                        appliedPromo && React.createElement('div', {
                            className: "promo-applied bg-green-50 border border-green-200 rounded-lg p-3 mb-4"
                        },
                            React.createElement('div', {
                                className: "flex items-center justify-between"
                            },
                                React.createElement('div', {
                                    className: "flex items-center space-x-2"
                                },
                                    React.createElement(Tag, { className: "w-4 h-4 text-green-600" }),
                                    React.createElement('span', {
                                        className: "font-medium text-green-800"
                                    }, appliedPromo.code),
                                    React.createElement('span', {
                                        className: "text-sm text-green-700"
                                    }, appliedPromo.description)
                                ),
                                React.createElement('button', {
                                    onClick: () => setAppliedPromo(null),
                                    className: "text-green-600 hover:text-green-800"
                                }, React.createElement(X, { className: "w-4 h-4" }))
                            )
                        ),

                        // Order Summary
                        React.createElement('div', {
                            className: "space-y-2"
                        },
                            React.createElement('div', {
                                className: "flex justify-between text-gray-600"
                            },
                                React.createElement('span', null, "Subtotal"),
                                React.createElement('span', null, `$${subtotal.toFixed(2)}`)
                            ),
                            appliedPromo && React.createElement('div', {
                                className: "flex justify-between text-green-600"
                            },
                                React.createElement('span', null, `Promo (${appliedPromo.code})`),
                                React.createElement('span', null, `-$${promoDiscount.toFixed(2)}`)
                            ),
                            React.createElement('div', {
                                className: "flex justify-between text-sm text-gray-500"
                            },
                                React.createElement('span', null, "You're saving"),
                                React.createElement('span', null, `$${totalSavings.toFixed(0)}`)
                            ),
                            React.createElement('div', {
                                className: "border-t pt-2"
                            }),
                            React.createElement('div', {
                                className: "flex justify-between text-xl font-bold text-gray-800 total-highlight"
                            },
                                React.createElement('span', null, "Total"),
                                React.createElement('span', null, `$${total.toFixed(2)}`)
                            )
                        )
                    )
                ),

                React.createElement('button', {
                    onClick: () => setCurrentStep('info'),
                    className: "w-full bg-blue-600 text-white py-3 px-4 rounded-lg font-semibold hover:bg-blue-700 transition-colors"
                }, "Continue to Customer Info")
            );

            // Customer Info Step
            const CustomerInfoStep = () => React.createElement('div', {
                className: "checkout-step active"
            },
                React.createElement('div', {
                    className: "bg-white rounded-lg shadow-md p-6 mb-6"
                },
                    React.createElement('h2', {
                        className: "text-xl font-bold text-gray-800 mb-6"
                    }, "Customer Information"),

                    React.createElement('div', {
                        className: "grid grid-cols-1 md:grid-cols-2 gap-4 mb-6"
                    },
                        React.createElement('div', {
                            className: "form-field"
                        },
                            React.createElement('label', {
                                className: "block text-sm font-medium text-gray-700 mb-2"
                            }, "First Name"),
                            React.createElement('input', {
                                type: "text",
                                value: customerInfo.firstName,
                                onChange: (e) => setCustomerInfo({...customerInfo, firstName: e.target.value}),
                                className: "w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"
                            })
                        ),
                        React.createElement('div', {
                            className: "form-field"
                        },
                            React.createElement('label', {
                                className: "block text-sm font-medium text-gray-700 mb-2"
                            }, "Last Name"),
                            React.createElement('input', {
                                type: "text",
                                value: customerInfo.lastName,
                                onChange: (e) => setCustomerInfo({...customerInfo, lastName: e.target.value}),
                                className: "w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"
                            })
                        )
                    ),

                    React.createElement('div', {
                        className: "form-field mb-4"
                    },
                        React.createElement('label', {
                            className: "block text-sm font-medium text-gray-700 mb-2"
                        }, "Email Address"),
                        React.createElement('input', {
                            type: "email",
                            value: customerInfo.email,
                            onChange: (e) => setCustomerInfo({...customerInfo, email: e.target.value}),
                            className: "w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"
                        })
                    ),

                    React.createElement('div', {
                        className: "form-field mb-6"
                    },
                        React.createElement('label', {
                            className: "block text-sm font-medium text-gray-700 mb-2"
                        }, "Phone Number"),
                        React.createElement('input', {
                            type: "tel",
                            value: customerInfo.phone,
                            onChange: (e) => setCustomerInfo({...customerInfo, phone: e.target.value}),
                            className: "w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"
                        })
                    ),

                    React.createElement('div', {
                        className: "space-y-3"
                    },
                        React.createElement('label', {
                            className: "flex items-center space-x-2"
                        },
                            React.createElement('input', {
                                type: "checkbox",
                                checked: customerInfo.acceptTerms,
                                onChange: (e) => setCustomerInfo({...customerInfo, acceptTerms: e.target.checked}),
                                className: "rounded border-gray-300 text-blue-600 focus:ring-blue-500"
                            }),
                            React.createElement('span', {
                                className: "text-sm text-gray-700"
                            }, "I accept the ", React.createElement('a', { href: "#", className: "text-blue-600 hover:underline" }, "Terms and Conditions"))
                        ),
                        React.createElement('label', {
                            className: "flex items-center space-x-2"
                        },
                            React.createElement('input', {
                                type: "checkbox",
                                checked: customerInfo.receiveUpdates,
                                onChange: (e) => setCustomerInfo({...customerInfo, receiveUpdates: e.target.checked}),
                                className: "rounded border-gray-300 text-blue-600 focus:ring-blue-500"
                            }),
                            React.createElement('span', {
                                className: "text-sm text-gray-700"
                            }, "Receive updates about new attractions and special offers")
                        )
                    )
                ),

                React.createElement('div', {
                    className: "flex space-x-4"
                },
                    React.createElement('button', {
                        onClick: () => setCurrentStep('cart'),
                        className: "flex-1 bg-gray-200 text-gray-800 py-3 px-4 rounded-lg font-semibold hover:bg-gray-300 transition-colors"
                    }, "Back"),
                    React.createElement('button', {
                        onClick: () => setCurrentStep('payment'),
                        disabled: !customerInfo.acceptTerms,
                        className: "flex-1 bg-blue-600 text-white py-3 px-4 rounded-lg font-semibold hover:bg-blue-700 disabled:bg-gray-400 transition-colors"
                    }, "Continue to Payment")
                )
            );

            // Payment Step
            const PaymentStep = () => React.createElement('div', {
                className: "checkout-step active"
            },
                React.createElement('div', {
                    className: "bg-white rounded-lg shadow-md p-6 mb-6"
                },
                    React.createElement('h2', {
                        className: "text-xl font-bold text-gray-800 mb-6"
                    }, "Payment Method"),

                    // Payment Methods
                    React.createElement('div', {
                        className: "grid grid-cols-2 gap-3 mb-6"
                    }, checkoutData.paymentMethods.map(method => 
                        React.createElement('button', {
                            key: method.id,
                            onClick: () => setPaymentInfo({...paymentInfo, method: method.id}),
                            className: `p-4 border-2 rounded-lg transition-all ${
                                paymentInfo.method === method.id 
                                    ? 'border-blue-600 bg-blue-50' 
                                    : 'border-gray-200 hover:border-gray-300'
                            }`
                        },
                            React.createElement('div', {
                                className: "flex items-center justify-center space-x-2"
                            },
                                React.createElement(method.icon, { 
                                    className: `w-5 h-5 ${paymentInfo.method === method.id ? 'text-blue-600' : 'text-gray-600'}` 
                                }),
                                React.createElement('span', {
                                    className: `text-sm font-medium ${paymentInfo.method === method.id ? 'text-blue-600' : 'text-gray-700'}`
                                }, method.name)
                            ),
                            method.popular && React.createElement('div', {
                                className: "text-xs text-green-600 mt-1"
                            }, "Popular")
                        )
                    )),

                    // Card Details (if card selected)
                    paymentInfo.method === 'card' && React.createElement('div', {
                        className: "space-y-4"
                    },
                        React.createElement('div', {
                            className: "form-field"
                        },
                            React.createElement('label', {
                                className: "block text-sm font-medium text-gray-700 mb-2"
                            }, "Card Number"),
                            React.createElement('input', {
                                type: "text",
                                value: paymentInfo.cardNumber,
                                onChange: (e) => setPaymentInfo({...paymentInfo, cardNumber: e.target.value}),
                                placeholder: "1234 5678 9012 3456",
                                className: "w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"
                            })
                        ),
                        React.createElement('div', {
                            className: "grid grid-cols-3 gap-4"
                        },
                            React.createElement('div', {
                                className: "form-field"
                            },
                                React.createElement('label', {
                                    className: "block text-sm font-medium text-gray-700 mb-2"
                                }, "Month"),
                                React.createElement('select', {
                                    value: paymentInfo.expiryMonth,
                                    onChange: (e) => setPaymentInfo({...paymentInfo, expiryMonth: e.target.value}),
                                    className: "w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"
                                }, Array.from({length: 12}, (_, i) => i + 1).map(month => 
                                    React.createElement('option', {
                                        key: month,
                                        value: month.toString().padStart(2, '0')
                                    }, month.toString().padStart(2, '0'))
                                ))
                            ),
                            React.createElement('div', {
                                className: "form-field"
                            },
                                React.createElement('label', {
                                    className: "block text-sm font-medium text-gray-700 mb-2"
                                }, "Year"),
                                React.createElement('select', {
                                    value: paymentInfo.expiryYear,
                                    onChange: (e) => setPaymentInfo({...paymentInfo, expiryYear: e.target.value}),
                                    className: "w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"
                                }, Array.from({length: 10}, (_, i) => new Date().getFullYear() + i).map(year => 
                                    React.createElement('option', {
                                        key: year,
                                        value: year
                                    }, year)
                                ))
                            ),
                            React.createElement('div', {
                                className: "form-field"
                            },
                                React.createElement('label', {
                                    className: "block text-sm font-medium text-gray-700 mb-2"
                                }, "CVV"),
                                React.createElement('input', {
                                    type: showCardDetails ? "text" : "password",
                                    value: paymentInfo.cvv,
                                    onChange: (e) => setPaymentInfo({...paymentInfo, cvv: e.target.value}),
                                    placeholder: "123",
                                    className: "w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"
                                })
                            )
                        ),
                        React.createElement('div', {
                            className: "form-field"
                        },
                            React.createElement('label', {
                                className: "block text-sm font-medium text-gray-700 mb-2"
                            }, "Name on Card"),
                            React.createElement('input', {
                                type: "text",
                                value: paymentInfo.nameOnCard,
                                onChange: (e) => setPaymentInfo({...paymentInfo, nameOnCard: e.target.value}),
                                className: "w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"
                            })
                        ),
                        React.createElement('label', {
                            className: "flex items-center space-x-2"
                        },
                            React.createElement('input', {
                                type: "checkbox",
                                checked: paymentInfo.saveCard,
                                onChange: (e) => setPaymentInfo({...paymentInfo, saveCard: e.target.checked}),
                                className: "rounded border-gray-300 text-blue-600 focus:ring-blue-500"
                            }),
                            React.createElement('span', {
                                className: "text-sm text-gray-700"
                            }, "Save card for future purchases")
                        )
                    ),

                    // Security Notice
                    React.createElement('div', {
                        className: "bg-gray-50 rounded-lg p-4 mt-6"
                    },
                        React.createElement('div', {
                            className: "flex items-center space-x-2 text-gray-700"
                        },
                            React.createElement(Shield, { className: "w-5 h-5 text-green-600" }),
                            React.createElement('span', { className: "text-sm font-medium" }, "Your payment is secured with 256-bit SSL encryption")
                        )
                    )
                ),

                // Order Summary
                React.createElement('div', {
                    className: "bg-gray-50 rounded-lg p-4 mb-6"
                },
                    React.createElement('h3', {
                        className: "font-semibold text-gray-800 mb-3"
                    }, "Order Summary"),
                    React.createElement('div', {
                        className: "space-y-2"
                    },
                        cart.map(item => 
                            React.createElement('div', {
                                key: item.id,
                                className: "flex justify-between text-sm"
                            },
                                React.createElement('span', null, item.name),
                                React.createElement('span', null, `$${item.price.toFixed(2)}`)
                            )
                        ),
                        appliedPromo && React.createElement('div', {
                            className: "flex justify-between text-sm text-green-600"
                        },
                            React.createElement('span', null, `Promo (${appliedPromo.code})`),
                            React.createElement('span', null, `-$${promoDiscount.toFixed(2)}`)
                        ),
                        React.createElement('div', {
                            className: "border-t pt-2 mt-2"
                        }),
                        React.createElement('div', {
                            className: "flex justify-between font-bold"
                        },
                            React.createElement('span', null, "Total"),
                            React.createElement('span', null, `$${total.toFixed(2)}`)
                        )
                    )
                ),

                React.createElement('div', {
                    className: "flex space-x-4"
                },
                    React.createElement('button', {
                        onClick: () => setCurrentStep('info'),
                        className: "flex-1 bg-gray-200 text-gray-800 py-3 px-4 rounded-lg font-semibold hover:bg-gray-300 transition-colors"
                    }, "Back"),
                    React.createElement('button', {
                        onClick: processPayment,
                        disabled: isProcessing,
                        className: `flex-1 py-3 px-4 rounded-lg font-semibold transition-colors ${
                            isProcessing 
                                ? 'payment-processing text-white cursor-not-allowed' 
                                : 'bg-green-600 text-white hover:bg-green-700'
                        }`
                    }, isProcessing ? React.createElement('span', { className: "loading-dots" }, "Processing") : `Pay $${total.toFixed(2)}`)
                )
            );

            // Confirmation Step
            const ConfirmationStep = () => React.createElement('div', {
                className: "checkout-step success-animation"
            },
                React.createElement('div', {
                    className: "text-center mb-8"
                },
                    React.createElement('div', {
                        className: "w-16 h-16 bg-green-600 rounded-full flex items-center justify-center mx-auto mb-4"
                    }, React.createElement(Check, { className: "w-8 h-8 text-white" })),
                    React.createElement('h2', {
                        className: "text-2xl font-bold text-gray-800 mb-2"
                    }, "Purchase Complete!"),
                    React.createElement('p', {
                        className: "text-gray-600"
                    }, "Your Palm Beach Passes are ready to use")
                ),

                // Generated Passes
                React.createElement('div', {
                    className: "space-y-4 mb-8"
                }, generatedPasses.map(pass => 
                    React.createElement('div', {
                        key: pass.id,
                        className: "pass-preview rounded-lg p-4 text-white"
                    },
                        React.createElement('div', {
                            className: "flex justify-between items-start mb-3"
                        },
                            React.createElement('div', null,
                                React.createElement('h3', {
                                    className: "font-bold"
                                }, "Palm Beach Pass"),
                                React.createElement('p', {
                                    className: "text-sm opacity-90"
                                }, pass.name)
                            ),
                            React.createElement('span', {
                                className: "text-xs px-2 py-1 rounded-full bg-green-400 text-green-900"
                            }, "READY")
                        ),
                        React.createElement('div', {
                            className: "grid grid-cols-2 gap-4 text-sm"
                        },
                            React.createElement('div', null,
                                React.createElement('p', { className: "opacity-80" }, "Pass ID"),
                                React.createElement('p', { className: "font-mono" }, pass.id)
                            ),
                            React.createElement('div', null,
                                React.createElement('p', { className: "opacity-80" }, "Customer"),
                                React.createElement('p', null, pass.customerName)
                            )
                        )
                    )
                )),

                // Next Steps
                React.createElement('div', {
                    className: "bg-blue-50 rounded-lg p-6 mb-6"
                },
                    React.createElement('h3', {
                        className: "font-semibold text-blue-800 mb-3"
                    }, "What's Next?"),
                    React.createElement('div', {
                        className: "space-y-2 text-sm text-blue-700"
                    },
                        React.createElement('p', null, "✓ Confirmation email sent to ", customerInfo.email),
                        React.createElement('p', null, "✓ Passes activated and ready to scan"),
                        React.createElement('p', null, "✓ Show QR codes at any participating attraction"),
                        React.createElement('p', null, "✓ Download the mobile app for easy access")
                    )
                ),

                // Actions
                React.createElement('div', {
                    className: "grid grid-cols-1 md:grid-cols-3 gap-4"
                },
                    React.createElement('button', {
                        onClick: () => window.open('customer-passes.html', '_blank'),
                        className: "bg-blue-600 text-white py-3 px-4 rounded-lg font-semibold hover:bg-blue-700 transition-colors"
                    }, "View My Passes"),
                    React.createElement('button', {
                        onClick: () => window.open('index.html', '_blank'),
                        className: "bg-green-600 text-white py-3 px-4 rounded-lg font-semibold hover:bg-green-700 transition-colors"
                    }, "Explore Attractions"),
                    React.createElement('button', {
                        onClick: () => {
                            const receipt = `Palm Beach Pass Receipt\n\n${generatedPasses.map(p => `${p.name} - ${p.id}`).join('\n')}\n\nTotal: $${total.toFixed(2)}`;
                            const blob = new Blob([receipt], { type: 'text/plain' });
                            const url = URL.createObjectURL(blob);
                            const a = document.createElement('a');
                            a.href = url;
                            a.download = 'palm-beach-pass-receipt.txt';
                            a.click();
                        },
                        className: "bg-gray-600 text-white py-3 px-4 rounded-lg font-semibold hover:bg-gray-700 transition-colors"
                    }, "Download Receipt")
                )
            );

            // Main render
            const renderStep = () => {
                switch (currentStep) {
                    case 'cart':
                        return React.createElement(CartStep);
                    case 'info':
                        return React.createElement(CustomerInfoStep);
                    case 'payment':
                        return React.createElement(PaymentStep);
                    case 'confirmation':
                        return React.createElement(ConfirmationStep);
                    default:
                        return React.createElement(CartStep);
                }
            };

            return React.createElement('div', {
                className: "min-h-screen bg-gray-100"
            },
                React.createElement(Header),
                !purchaseComplete && React.createElement(ProgressIndicator),
                React.createElement('div', {
                    className: "max-w-4xl mx-auto p-4"
                }, renderStep())
            );
        };

        ReactDOM.render(React.createElement(CheckoutApp), document.getElementById('root'));
    </script>
</body>
</html>
