<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Palm Beach Pass - QR System Demo</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/react/18.2.0/umd/react.production.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/react-dom/18.2.0/umd/react-dom.production.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/babel-standalone/7.23.5/babel.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/lucide/0.263.1/umd/lucide.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/qrcode-generator/1.4.4/qrcode.min.js"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/tailwindcss/2.2.19/tailwind.min.css" rel="stylesheet">
    <style>
        .qr-code {
            image-rendering: pixelated;
            image-rendering: -moz-crisp-edges;
            image-rendering: crisp-edges;
        }
        
        .pass-card {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            box-shadow: 0 8px 32px 0 rgba(31, 38, 135, 0.37);
            backdrop-filter: blur(4px);
            border: 1px solid rgba(255, 255, 255, 0.18);
        }
        
        .pass-active {
            animation: pulse-glow 2s infinite;
        }
        
        @keyframes pulse-glow {
            0%, 100% { box-shadow: 0 8px 32px 0 rgba(31, 38, 135, 0.37); }
            50% { box-shadow: 0 8px 32px 0 rgba(16, 185, 129, 0.5); }
        }
        
        .pass-expired {
            background: linear-gradient(135deg, #6b7280 0%, #374151 100%);
            opacity: 0.6;
        }
        
        .validation-success {
            animation: successFlash 1s ease-out;
        }
        
        @keyframes successFlash {
            0% { background-color: rgba(16, 185, 129, 0.1); }
            50% { background-color: rgba(16, 185, 129, 0.3); }
            100% { background-color: transparent; }
        }
        
        .validation-error {
            animation: errorFlash 1s ease-out;
        }
        
        @keyframes errorFlash {
            0% { background-color: rgba(239, 68, 68, 0.1); }
            50% { background-color: rgba(239, 68, 68, 0.3); }
            100% { background-color: transparent; }
        }
        
        .geolocation-indicator {
            position: relative;
        }
        
        .geolocation-indicator::after {
            content: '';
            position: absolute;
            top: -2px;
            right: -2px;
            width: 8px;
            height: 8px;
            background: #10B981;
            border-radius: 50%;
            animation: ping 1s cubic-bezier(0, 0, 0.2, 1) infinite;
        }
        
        @keyframes ping {
            75%, 100% {
                transform: scale(2);
                opacity: 0;
            }
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useRef } = React;
        const { 
            QrCode, MapPin, Clock, Shield, Check, X, AlertTriangle, 
            RefreshCw, Download, Share, Eye, Settings, Calendar,
            Smartphone, CreditCard, Users, BarChart, TrendingUp
        } = lucide;

        // Shared QR System Data and Logic
        const QRSystem = {
            // Generate unique pass ID
            generatePassId: (duration, type, sequence) => {
                const prefix = 'PB';
                const durationCode = duration + 'D';
                const typeCode = type === 'adult' ? 'ADT' : 'CHD';
                const seqCode = String(sequence).padStart(3, '0');
                return `${prefix}${String(Math.floor(Math.random() * 1000)).padStart(3, '0')}-${durationCode}-${typeCode}-${seqCode}`;
            },

            // Generate QR code data URL
            generateQRCode: (passId) => {
                const qr = qrcode(0, 'M');
                qr.addData(passId);
                qr.make();
                return qr.createDataURL(8, 2);
            },

            // Validate pass with comprehensive checks
            validatePass: async (passId, location, skipGeolocation = false) => {
                // Simulate validation delay
                await new Promise(resolve => setTimeout(resolve, 1000));

                const pass = QRSystem.database.passes[passId];
                const now = new Date();

                // Check if pass exists
                if (!pass) {
                    return {
                        valid: false,
                        code: 'INVALID_PASS',
                        message: 'Pass not found in system',
                        details: 'This pass ID does not exist in our database'
                    };
                }

                // Check if pass is activated
                if (!pass.activatedAt) {
                    // Auto-activate on first scan
                    pass.activatedAt = now.toISOString();
                    pass.expiresAt = new Date(now.getTime() + (pass.duration * 24 * 60 * 60 * 1000)).toISOString();
                    pass.status = 'active';
                }

                // Check expiration
                const expiryDate = new Date(pass.expiresAt);
                if (now > expiryDate) {
                    pass.status = 'expired';
                    return {
                        valid: false,
                        code: 'PASS_EXPIRED',
                        message: 'Pass has expired',
                        details: `Pass expired on ${expiryDate.toLocaleDateString()}`
                    };
                }

                // Check time restriction (1 hour between scans)
                if (pass.lastScanTime) {
                    const lastScan = new Date(pass.lastScanTime);
                    const timeDiff = (now - lastScan) / (1000 * 60); // minutes
                    if (timeDiff < 60) {
                        return {
                            valid: false,
                            code: 'TOO_SOON',
                            message: 'Pass scanned too recently',
                            details: `Please wait ${Math.ceil(60 - timeDiff)} minutes before next scan`
                        };
                    }
                }

                // Check geolocation (if enabled)
                if (!skipGeolocation && location) {
                    const isValidLocation = await QRSystem.validateGeolocation(pass.geolocation, location);
                    if (!isValidLocation) {
                        return {
                            valid: false,
                            code: 'LOCATION_MISMATCH',
                            message: 'Invalid scan location',
                            details: 'Pass can only be used at authorized locations'
                        };
                    }
                }

                // Update pass scan info
                pass.lastScanTime = now.toISOString();
                pass.lastScanLocation = location?.name || 'Unknown';
                pass.scanCount = (pass.scanCount || 0) + 1;

                // Log scan activity
                QRSystem.logScanActivity({
                    passId,
                    result: 'approved',
                    location: location?.name || 'Unknown',
                    timestamp: now.toISOString(),
                    customer: pass.customerName
                });

                return {
                    valid: true,
                    code: 'VALID',
                    message: 'Pass validated successfully',
                    pass: pass,
                    customer: pass.customerName,
                    type: pass.type,
                    details: `${pass.duration}-day ${pass.type} pass`
                };
            },

            // Validate geolocation
            validateGeolocation: async (passLocation, scanLocation) => {
                if (!passLocation || !scanLocation) return true;
                
                // Calculate distance between coordinates
                const distance = Math.sqrt(
                    Math.pow(passLocation.lat - scanLocation.lat, 2) + 
                    Math.pow(passLocation.lng - scanLocation.lng, 2)
                );
                
                // Allow 0.01 degree tolerance (~1km)
                return distance <= 0.01;
            },

            // Log scan activity
            logScanActivity: (activity) => {
                if (!QRSystem.database.scanLogs) {
                    QRSystem.database.scanLogs = [];
                }
                
                QRSystem.database.scanLogs.unshift({
                    id: Date.now(),
                    ...activity
                });

                // Keep only last 1000 logs
                if (QRSystem.database.scanLogs.length > 1000) {
                    QRSystem.database.scanLogs = QRSystem.database.scanLogs.slice(0, 1000);
                }
            },

            // Get current location (simulated)
            getCurrentLocation: () => {
                return new Promise((resolve) => {
                    // Simulate GPS delay
                    setTimeout(() => {
                        resolve({
                            lat: 26.4728 + (Math.random() - 0.5) * 0.001,
                            lng: -80.0726 + (Math.random() - 0.5) * 0.001,
                            name: 'Palm Beach Seaquarium'
                        });
                    }, 1500);
                });
            },

            // Database simulation
            database: {
                passes: {
                    'PB001-7D-ADT-001': {
                        id: 'PB001-7D-ADT-001',
                        customerName: 'John Smith',
                        email: 'john.smith@email.com',
                        type: 'adult',
                        duration: 7,
                        purchasedAt: '2025-08-05T10:00:00Z',
                        activatedAt: '2025-08-05T14:30:00Z',
                        expiresAt: '2025-08-12T14:30:00Z',
                        status: 'active',
                        price: 95.00,
                        geolocation: { lat: 26.4728, lng: -80.0726 },
                        lastScanTime: null,
                        lastScanLocation: null,
                        scanCount: 0
                    },
                    'PB002-3D-CHD-001': {
                        id: 'PB002-3D-CHD-001',
                        customerName: 'Emma Davis',
                        email: 'emma.davis@email.com',
                        type: 'child',
                        duration: 3,
                        purchasedAt: '2025-08-06T09:15:00Z',
                        activatedAt: '2025-08-06T11:00:00Z',
                        expiresAt: '2025-08-09T11:00:00Z',
                        status: 'active',
                        price: 45.00,
                        geolocation: { lat: 26.4728, lng: -80.0726 },
                        lastScanTime: '2025-08-07T10:30:00Z',
                        lastScanLocation: 'Boca Raton Museum',
                        scanCount: 3
                    },
                    'PB003-1D-ADT-002': {
                        id: 'PB003-1D-ADT-002',
                        customerName: 'Robert Wilson',
                        email: 'robert.wilson@email.com',
                        type: 'adult',
                        duration: 1,
                        purchasedAt: '2025-08-06T16:00:00Z',
                        activatedAt: '2025-08-06T18:00:00Z',
                        expiresAt: '2025-08-06T23:59:59Z',
                        status: 'expired',
                        price: 35.00,
                        geolocation: { lat: 26.4728, lng: -80.0726 },
                        lastScanTime: '2025-08-06T20:15:00Z',
                        lastScanLocation: 'Palm Beach Seaquarium',
                        scanCount: 1
                    }
                },
                
                scanLogs: [],
                
                locations: [
                    { id: 1, name: 'Palm Beach Seaquarium', lat: 26.4728, lng: -80.0726 },
                    { id: 2, name: 'Boca Raton Museum', lat: 26.3683, lng: -80.1289 },
                    { id: 3, name: 'Norton Museum', lat: 26.7056, lng: -80.0533 },
                    { id: 4, name: 'Worth Avenue', lat: 26.7056, lng: -80.0364 }
                ]
            }
        };

        const QRSystemDemo = () => {
            const [currentView, setCurrentView] = useState('overview');
            const [selectedPass, setSelectedPass] = useState(null);
            const [validationResult, setValidationResult] = useState(null);
            const [isValidating, setIsValidating] = useState(false);
            const [currentLocation, setCurrentLocation] = useState(null);
            const [testPassId, setTestPassId] = useState('PB001-7D-ADT-001');

            // Generate new pass demo
            const generateNewPass = () => {
                const duration = Math.floor(Math.random() * 7) + 1;
                const type = Math.random() > 0.5 ? 'adult' : 'child';
                const sequence = Object.keys(QRSystem.database.passes).length + 1;
                const passId = QRSystem.generatePassId(duration, type, sequence);
                
                const newPass = {
                    id: passId,
                    customerName: 'Demo Customer',
                    email: 'demo@customer.com',
                    type: type,
                    duration: duration,
                    purchasedAt: new Date().toISOString(),
                    activatedAt: null,
                    expiresAt: null,
                    status: 'inactive',
                    price: type === 'adult' ? 35 + (duration * 10) : 25 + (duration * 5),
                    geolocation: { lat: 26.4728, lng: -80.0726 },
                    lastScanTime: null,
                    lastScanLocation: null,
                    scanCount: 0
                };

                QRSystem.database.passes[passId] = newPass;
                setSelectedPass(newPass);
                setCurrentView('pass-detail');
            };

            // Test validation
            const testValidation = async () => {
                setIsValidating(true);
                setValidationResult(null);

                try {
                    const location = await QRSystem.getCurrentLocation();
                    setCurrentLocation(location);
                    
                    const result = await QRSystem.validatePass(testPassId, location);
                    setValidationResult(result);
                } catch (error) {
                    setValidationResult({
                        valid: false,
                        code: 'SYSTEM_ERROR',
                        message: 'Validation system error',
                        details: error.message
                    });
                }

                setIsValidating(false);
            };

            // Overview Component
            const Overview = () => {
                const passes = Object.values(QRSystem.database.passes);
                const activePasses = passes.filter(p => p.status === 'active').length;
                const expiredPasses = passes.filter(p => p.status === 'expired').length;
                const totalScans = passes.reduce((sum, p) => sum + (p.scanCount || 0), 0);

                return React.createElement('div', {
                    className: "max-w-6xl mx-auto p-6"
                },
                    React.createElement('div', {
                        className: "text-center mb-8"
                    },
                        React.createElement('h1', {
                            className: "text-3xl font-bold text-gray-800 mb-2"
                        }, "QR Code System"),
                        React.createElement('p', {
                            className: "text-gray-600"
                        }, "Palm Beach Pass QR Generation, Validation & Management")
                    ),

                    // Stats Grid
                    React.createElement('div', {
                        className: "grid grid-cols-1 md:grid-cols-4 gap-6 mb-8"
                    },
                        [
                            { label: 'Total Passes', value: passes.length, icon: QrCode, color: 'blue' },
                            { label: 'Active Passes', value: activePasses, icon: Check, color: 'green' },
                            { label: 'Expired Passes', value: expiredPasses, icon: X, color: 'red' },
                            { label: 'Total Scans', value: totalScans, icon: BarChart, color: 'purple' }
                        ].map((stat, index) => 
                            React.createElement('div', {
                                key: index,
                                className: "bg-white rounded-lg shadow-md p-6"
                            },
                                React.createElement('div', {
                                    className: "flex items-center justify-between"
                                },
                                    React.createElement('div', null,
                                        React.createElement('p', {
                                            className: "text-sm text-gray-600"
                                        }, stat.label),
                                        React.createElement('p', {
                                            className: "text-2xl font-bold text-gray-800"
                                        }, stat.value)
                                    ),
                                    React.createElement(stat.icon, { 
                                        className: `w-8 h-8 text-${stat.color}-600` 
                                    })
                                )
                            )
                        )
                    ),

                    // Quick Actions
                    React.createElement('div', {
                        className: "grid grid-cols-1 md:grid-cols-3 gap-6 mb-8"
                    },
                        React.createElement('button', {
                            onClick: generateNewPass,
                            className: "bg-blue-600 text-white p-6 rounded-lg hover:bg-blue-700 transition-colors"
                        },
                            React.createElement(QrCode, { className: "w-8 h-8 mx-auto mb-2" }),
                            React.createElement('h3', { className: "font-semibold" }, "Generate New Pass"),
                            React.createElement('p', { className: "text-sm opacity-90" }, "Create a new QR pass with random parameters")
                        ),
                        React.createElement('button', {
                            onClick: () => setCurrentView('validator'),
                            className: "bg-green-600 text-white p-6 rounded-lg hover:bg-green-700 transition-colors"
                        },
                            React.createElement(Shield, { className: "w-8 h-8 mx-auto mb-2" }),
                            React.createElement('h3', { className: "font-semibold" }, "Test Validator"),
                            React.createElement('p', { className: "text-sm opacity-90" }, "Test QR code validation system")
                        ),
                        React.createElement('button', {
                            onClick: () => setCurrentView('passes'),
                            className: "bg-purple-600 text-white p-6 rounded-lg hover:bg-purple-700 transition-colors"
                        },
                            React.createElement(Eye, { className: "w-8 h-8 mx-auto mb-2" }),
                            React.createElement('h3', { className: "font-semibold" }, "View All Passes"),
                            React.createElement('p', { className: "text-sm opacity-90" }, "Browse and manage existing passes")
                        )
                    ),

                    // System Features
                    React.createElement('div', {
                        className: "bg-white rounded-lg shadow-md p-6"
                    },
                        React.createElement('h3', {
                            className: "text-lg font-semibold text-gray-800 mb-4"
                        }, "System Features"),
                        React.createElement('div', {
                            className: "grid grid-cols-1 md:grid-cols-2 gap-4"
                        },
                            [
                                'Unique QR code generation for each pass',
                                'Time-based validation (1-hour scan restrictions)',
                                'Geolocation validation for authorized venues',
                                'Pass duration enforcement (1, 3, 5, 7 days)',
                                'Real-time activation on first scan',
                                'Comprehensive audit logging',
                                'Automatic expiration handling',
                                'Mobile-optimized QR codes'
                            ].map((feature, index) => 
                                React.createElement('div', {
                                    key: index,
                                    className: "flex items-center space-x-2"
                                },
                                    React.createElement(Check, { className: "w-4 h-4 text-green-600" }),
                                    React.createElement('span', { className: "text-sm text-gray-700" }, feature)
                                )
                            )
                        )
                    )
                );
            };

            // Pass Detail Component
            const PassDetail = ({ pass }) => {
                const qrDataURL = QRSystem.generateQRCode(pass.id);
                const isActive = pass.status === 'active';
                const isExpired = pass.status === 'expired';

                return React.createElement('div', {
                    className: "max-w-md mx-auto p-6"
                },
                    React.createElement('div', {
                        className: "text-center mb-6"
                    },
                        React.createElement('button', {
                            onClick: () => setCurrentView('overview'),
                            className: "text-blue-600 hover:text-blue-800 mb-4"
                        }, "← Back to Overview"),
                        React.createElement('h2', {
                            className: "text-2xl font-bold text-gray-800"
                        }, "Digital Pass")
                    ),

                    // Pass Card
                    React.createElement('div', {
                        className: `pass-card rounded-lg p-6 text-white mb-6 ${
                            isActive ? 'pass-active' : isExpired ? 'pass-expired' : ''
                        }`
                    },
                        React.createElement('div', {
                            className: "text-center mb-4"
                        },
                            React.createElement('h3', {
                                className: "text-xl font-bold mb-1"
                            }, "Palm Beach Pass"),
                            React.createElement('p', {
                                className: "text-sm opacity-90"
                            }, `${pass.duration}-Day ${pass.type.charAt(0).toUpperCase() + pass.type.slice(1)} Pass`)
                        ),

                        // QR Code
                        React.createElement('div', {
                            className: "bg-white rounded-lg p-4 mb-4"
                        },
                            React.createElement('img', {
                                src: qrDataURL,
                                alt: "QR Code",
                                className: "w-full h-auto qr-code"
                            })
                        ),

                        // Pass Details
                        React.createElement('div', {
                            className: "space-y-2 text-sm"
                        },
                            React.createElement('div', {
                                className: "flex justify-between"
                            },
                                React.createElement('span', null, "Pass ID:"),
                                React.createElement('span', { className: "font-mono" }, pass.id)
                            ),
                            React.createElement('div', {
                                className: "flex justify-between"
                            },
                                React.createElement('span', null, "Customer:"),
                                React.createElement('span', null, pass.customerName)
                            ),
                            React.createElement('div', {
                                className: "flex justify-between"
                            },
                                React.createElement('span', null, "Status:"),
                                React.createElement('span', {
                                    className: `font-semibold ${
                                        isActive ? 'text-green-300' : 
                                        isExpired ? 'text-red-300' : 'text-yellow-300'
                                    }`
                                }, pass.status.toUpperCase())
                            ),
                            pass.activatedAt && React.createElement('div', {
                                className: "flex justify-between"
                            },
                                React.createElement('span', null, "Activated:"),
                                React.createElement('span', null, new Date(pass.activatedAt).toLocaleDateString())
                            ),
                            pass.expiresAt && React.createElement('div', {
                                className: "flex justify-between"
                            },
                                React.createElement('span', null, "Expires:"),
                                React.createElement('span', null, new Date(pass.expiresAt).toLocaleDateString())
                            ),
                            React.createElement('div', {
                                className: "flex justify-between"
                            },
                                React.createElement('span', null, "Scans:"),
                                React.createElement('span', null, pass.scanCount || 0)
                            )
                        )
                    ),

                    // Actions
                    React.createElement('div', {
                        className: "flex space-x-2"
                    },
                        React.createElement('button', {
                            onClick: () => {
                                setTestPassId(pass.id);
                                setCurrentView('validator');
                            },
                            className: "flex-1 bg-green-600 text-white py-2 px-4 rounded-md hover:bg-green-700"
                        }, "Test Validation"),
                        React.createElement('button', {
                            onClick: () => {
                                const canvas = document.createElement('canvas');
                                const ctx = canvas.getContext('2d');
                                const img = new Image();
                                img.onload = () => {
                                    canvas.width = img.width;
                                    canvas.height = img.height;
                                    ctx.drawImage(img, 0, 0);
                                    const link = document.createElement('a');
                                    link.download = `pass-${pass.id}.png`;
                                    link.href = canvas.toDataURL();
                                    link.click();
                                };
                                img.src = qrDataURL;
                            },
                            className: "px-4 py-2 border border-gray-300 rounded-md hover:bg-gray-50"
                        }, React.createElement(Download, { className: "w-4 h-4" }))
                    )
                );
            };

            // Validator Component
            const Validator = () => React.createElement('div', {
                className: "max-w-md mx-auto p-6"
            },
                React.createElement('div', {
                    className: "text-center mb-6"
                },
                    React.createElement('button', {
                        onClick: () => setCurrentView('overview'),
                        className: "text-blue-600 hover:text-blue-800 mb-4"
                    }, "← Back to Overview"),
                    React.createElement('h2', {
                        className: "text-2xl font-bold text-gray-800 mb-2"
                    }, "QR Validator"),
                    React.createElement('p', {
                        className: "text-gray-600"
                    }, "Test pass validation with geolocation")
                ),

                // Location Status
                React.createElement('div', {
                    className: "bg-blue-50 rounded-lg p-4 mb-6"
                },
                    React.createElement('div', {
                        className: "flex items-center space-x-2 mb-2"
                    },
                        React.createElement(MapPin, { 
                            className: `w-5 h-5 ${currentLocation ? 'text-green-600 geolocation-indicator' : 'text-gray-400'}` 
                        }),
                        React.createElement('span', {
                            className: "font-medium text-gray-800"
                        }, "Location Status")
                    ),
                    React.createElement('p', {
                        className: "text-sm text-gray-600"
                    }, currentLocation 
                        ? `Connected: ${currentLocation.name}` 
                        : "No location data"
                    )
                ),

                // Test Input
                React.createElement('div', {
                    className: "space-y-4 mb-6"
                },
                    React.createElement('div', null,
                        React.createElement('label', {
                            className: "block text-sm font-medium text-gray-700 mb-2"
                        }, "Pass ID to Test"),
                        React.createElement('input', {
                            type: "text",
                            value: testPassId,
                            onChange: (e) => setTestPassId(e.target.value.toUpperCase()),
                            placeholder: "Enter pass ID",
                            className: "w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"
                        })
                    ),
                    React.createElement('button', {
                        onClick: testValidation,
                        disabled: isValidating || !testPassId.trim(),
                        className: "w-full bg-blue-600 text-white py-2 px-4 rounded-md hover:bg-blue-700 disabled:bg-gray-400 transition-colors"
                    }, isValidating ? "Validating..." : "Test Validation")
                ),

                // Validation Result
                validationResult && React.createElement('div', {
                    className: `rounded-lg p-4 ${validationResult.valid 
                        ? 'bg-green-50 border border-green-200 validation-success' 
                        : 'bg-red-50 border border-red-200 validation-error'}`
                },
                    React.createElement('div', {
                        className: "flex items-center space-x-2 mb-2"
                    },
                        React.createElement(validationResult.valid ? Check : X, { 
                            className: `w-5 h-5 ${validationResult.valid ? 'text-green-600' : 'text-red-600'}` 
                        }),
                        React.createElement('span', {
                            className: `font-medium ${validationResult.valid ? 'text-green-800' : 'text-red-800'}`
                        }, validationResult.message)
                    ),
                    React.createElement('p', {
                        className: `text-sm ${validationResult.valid ? 'text-green-700' : 'text-red-700'}`
                    }, validationResult.details),
                    validationResult.valid && validationResult.customer && React.createElement('div', {
                        className: "mt-2 text-sm text-green-700"
                    },
                        React.createElement('p', null, `Customer: ${validationResult.customer}`),
                        React.createElement('p', null, `Type: ${validationResult.type}`)
                    )
                ),

                // Quick Test Buttons
                React.createElement('div', {
                    className: "mt-6"
                },
                    React.createElement('p', {
                        className: "text-sm text-gray-600 mb-2"
                    }, "Quick Test:"),
                    React.createElement('div', {
                        className: "grid grid-cols-1 gap-2"
                    },
                        ['PB001-7D-ADT-001', 'PB002-3D-CHD-001', 'PB003-1D-ADT-002'].map(passId => 
                            React.createElement('button', {
                                key: passId,
                                onClick: () => setTestPassId(passId),
                                className: "text-left px-3 py-2 border border-gray-200 rounded text-sm hover:bg-gray-50"
                            }, passId)
                        )
                    )
                )
            );

            // All Passes View
            const AllPasses = () => {
                const passes = Object.values(QRSystem.database.passes);

                return React.createElement('div', {
                    className: "max-w-4xl mx-auto p-6"
                },
                    React.createElement('div', {
                        className: "text-center mb-6"
                    },
                        React.createElement('button', {
                            onClick: () => setCurrentView('overview'),
                            className: "text-blue-600 hover:text-blue-800 mb-4"
                        }, "← Back to Overview"),
                        React.createElement('h2', {
                            className: "text-2xl font-bold text-gray-800"
                        }, "All Passes")
                    ),

                    React.createElement('div', {
                        className: "grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4"
                    }, passes.map(pass => 
                        React.createElement('div', {
                            key: pass.id,
                            onClick: () => {
                                setSelectedPass(pass);
                                setCurrentView('pass-detail');
                            },
                            className: "bg-white rounded-lg shadow-md p-4 cursor-pointer hover:shadow-lg transition-shadow"
                        },
                            React.createElement('div', {
                                className: "flex items-center justify-between mb-2"
                            },
                                React.createElement('h3', {
                                    className: "font-semibold text-gray-800"
                                }, pass.customerName),
                                React.createElement('span', {
                                    className: `px-2 py-1 rounded text-xs ${
                                        pass.status === 'active' ? 'bg-green-100 text-green-800' :
                                        pass.status === 'expired' ? 'bg-red-100 text-red-800' :
                                        'bg-yellow-100 text-yellow-800'
                                    }`
                                }, pass.status.toUpperCase())
                            ),
                            React.createElement('p', {
                                className: "text-sm text-gray-600 mb-1"
                            }, `${pass.duration}-day ${pass.type} pass`),
                            React.createElement('p', {
                                className: "text-xs text-gray-500 font-mono"
                            }, pass.id),
                            React.createElement('p', {
                                className: "text-xs text-gray-500"
                            }, `Scans: ${pass.scanCount || 0}`)
                        )
                    ))
                );
            };

            // Bottom Navigation
            const BottomNav = () => React.createElement('nav', {
                className: "fixed bottom-0 left-0 right-0 bg-white border-t shadow-lg"
            },
                React.createElement('div', {
                    className: "flex justify-around py-2"
                }, [
                    { id: 'overview', icon: BarChart, label: 'Overview' },
                    { id: 'validator', icon: Shield, label: 'Validator' },
                    { id: 'passes', icon: QrCode, label: 'Passes' }
                ].map(item => 
                    React.createElement('button', {
                        key: item.id,
                        onClick: () => setCurrentView(item.id),
                        className: `flex flex-col items-center p-2 ${
                            currentView === item.id ? 'text-blue-600' : 'text-gray-600'
                        }`
                    },
                        React.createElement(item.icon, { 
                            className: `w-6 h-6 ${currentView === item.id ? 'text-blue-600' : 'text-gray-600'}` 
                        }),
                        React.createElement('span', {
                            className: "text-xs mt-1"
                        }, item.label)
                    )
                ))
            );

            // Main render
            const renderContent = () => {
                switch (currentView) {
                    case 'pass-detail':
                        return React.createElement(PassDetail, { pass: selectedPass });
                    case 'validator':
                        return React.createElement(Validator);
                    case 'passes':
                        return React.createElement(AllPasses);
                    default:
                        return React.createElement(Overview);
                }
            };

            return React.createElement('div', {
                className: "min-h-screen bg-gray-100 pb-20"
            },
                renderContent(),
                React.createElement(BottomNav)
            );
        };

        ReactDOM.render(React.createElement(QRSystemDemo), document.getElementById('root'));
    </script>
</body>
</html>
